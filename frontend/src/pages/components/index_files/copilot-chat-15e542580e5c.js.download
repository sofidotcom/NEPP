"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-chat"],{15930:(e,t,n)=>{let r;n.d(t,{H:()=>b});var i=n(10204);let AliveSession=class AliveSession extends i.ib{getUrlFromRefreshUrl(){return s(this.refreshUrl)}constructor(e,t,n,r,i){super(e,()=>this.getUrlFromRefreshUrl(),n,r,void 0,i),this.refreshUrl=t}};async function s(e){let t=await o(e);return t&&t.url&&t.token?a(t.url,t.token):null}async function o(e){let t=await fetch(e,{headers:{Accept:"application/json"}});if(t.ok)return t.json();if(404===t.status)return null;throw Error("fetch error")}async function a(e,t){let n=await fetch(e,{method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}});if(n.ok)return n.text();throw Error("fetch error")}var l=n(70170),c=n(75028),d=n(80688),u=n(23683),h=n(75632);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,{channel:t,type:n,data:r}){for(let i of e)i.dispatchEvent(new CustomEvent(`socket:${n}`,{bubbles:!1,cancelable:!1,detail:{name:t,data:r}}))}let f=class AliveSessionProxy{subscribe(e){let t=this.subscriptions.add(...e);t.length&&this.worker.port.postMessage({subscribe:t});let n=new Set(t.map(e=>e.name)),r=e.reduce((e,t)=>{let r=t.topic.name;return(0,i.JR)(r)&&!n.has(r)&&e.add(r),e},new Set);r.size&&this.worker.port.postMessage({requestPresence:Array.from(r)})}unsubscribeAll(...e){let t=this.subscriptions.drain(...e);t.length&&this.worker.port.postMessage({unsubscribe:t});let n=this.presenceMetadata.removeSubscribers(e);this.sendPresenceMetadataUpdate(n)}updatePresenceMetadata(e){let t=new Set;for(let n of e)this.presenceMetadata.setMetadata(n),t.add(n.channelName);this.sendPresenceMetadataUpdate(t)}sendPresenceMetadataUpdate(e){if(!e.size)return;let t=[];for(let n of e)t.push({channelName:n,metadata:this.presenceMetadata.getChannelMetadata(n)});this.worker.port.postMessage({updatePresenceMetadata:t})}online(){this.worker.port.postMessage({online:!0})}offline(){this.worker.port.postMessage({online:!1})}hangup(){this.worker.port.postMessage({hangup:!0})}receive(e){let{channel:t}=e;if("presence"===e.type){let n=this.notifyPresenceDebouncedByChannel.get(t);n||(n=(0,l.s)((e,n)=>{this.notify(e,n),this.notifyPresenceDebouncedByChannel.delete(t)},100),this.notifyPresenceDebouncedByChannel.set(t,n)),n(this.subscriptions.subscribers(t),e);return}this.notify(this.subscriptions.subscribers(t),e)}constructor(e,t,n,r,s,o){p(this,"worker",void 0),p(this,"subscriptions",new i.m0),p(this,"presenceMetadata",new i.VH),p(this,"notify",void 0),p(this,"notifyPresenceDebouncedByChannel",new Map),this.notify=s,this.worker=new SharedWorker(`${e}?module=true`,{name:`github-socket-worker-v3-${r}`,type:"module"}),this.worker.port.onmessage=({data:e})=>this.receive(e),this.worker.port.postMessage({connect:{url:t,refreshUrl:n,options:o}})}};async function g(){let e=function(){let e=document.head.querySelector("link[rel=shared-web-socket-src]")?.getAttribute("href");return e&&e.startsWith("/")?e:null}();if(!e)return;let t=document.head.querySelector("link[rel=shared-web-socket]")?.href??null;if(!t)return;let n=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-refresh-url")??null;if(!n)return;let r=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-session-id")??null;if(!r)return;let i=(()=>{let i=(0,h.G7)("alive_legacy_retries")?{socketPolicy:{timeout:4e3,attempts:7}}:{};if(!(0,u.nr)()&&"SharedWorker"in window&&"true"!==(0,d.A)("localStorage").getItem("bypassSharedWorker"))try{return new f(e,t,n,r,m,i)}catch{}return new AliveSession(t,n,!1,m,i)})();return window.addEventListener("online",()=>i.online()),window.addEventListener("offline",()=>i.offline()),window.addEventListener("pagehide",()=>{"hangup"in i&&i.hangup()}),i}async function x(){return await c.G,g()}function b(){return r||(r=x())}},88853:(e,t,n)=>{n.d(t,{$:()=>i});var r=n(10204);function i(e,t,n){if(!e)throw Error("Not connected to alive");if(!t)throw Error("No channel name");let i=r.KK.parse(t);if(!i)throw Error("Invalid channel name");let s={subscriber:{dispatchEvent:e=>{e instanceof CustomEvent&&n(e.detail.data)}},topic:i};return e.subscribe([s]),{unsubscribe:()=>e.unsubscribeAll(s.subscriber)}}},49339:(e,t,n)=>{function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{J:()=>CopilotAuthTokenProvider});let AuthToken=class AuthToken{get authorizationHeaderValue(){return`GitHub-Bearer ${this.value}`}needsRefreshing(e){return this.isExpired||this.ssoChanged(e)}get isExpired(){let e=new Date(this.expiration);return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))<new Date(Date.now()+15e3)}ssoChanged(e){return!(this.ssoOrgIDs.every(t=>e.includes(t))&&e.every(e=>this.ssoOrgIDs.includes(e)))}static fromResult(e,t){return new AuthToken(e.token,e.expiration,t)}serialize(){return{value:this.value,expiration:this.expiration,ssoOrgIDs:this.ssoOrgIDs}}static deserialize(e){return new AuthToken(e.value,e.expiration,e.ssoOrgIDs)}constructor(e,t,n){r(this,"value",void 0),r(this,"expiration",void 0),r(this,"ssoOrgIDs",void 0),this.value=e,this.expiration=t,this.ssoOrgIDs=n}};var i=n(80688),s=n(57572);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let CopilotAuthTokenProvider=class CopilotAuthTokenProvider{async getAuthToken(){let e=this.getLocalStorageAuthToken();return e?this.validateAuthToken(e):this.fetchAuthToken()}setLocalStorageAuthToken(e){this.copilotLocalStorage.setItem(this.storageKey,JSON.stringify(e.serialize()))}getLocalStorageAuthToken(){let e=this.copilotLocalStorage.getItem(this.storageKey);return e?AuthToken.deserialize(JSON.parse(e)):null}async getTokenForSpark(){let e=await this.getAuthToken(),t=new Date(e.expiration);return new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()))<new Date(Date.now()+42e4)?this.fetchAuthToken():e}async validateAuthToken(e){return e.needsRefreshing(this.ssoOrgIDs)?this.fetchAuthToken():e}fetchAuthToken(){return this.currentAuthTokenRequest||(this.currentAuthTokenRequest=this._fetchAuthToken()),this.currentAuthTokenRequest}async _fetchAuthToken(){let e=await (0,s.lS)(this.tokenEndpoint,{method:"POST"});if(e.ok){let t=await e.json();this.currentAuthTokenRequest=null;let n=AuthToken.fromResult(t,this.ssoOrgIDs);return this.setLocalStorageAuthToken(n),n}throw this.currentAuthTokenRequest=null,Error("Failed to mint new auth token")}constructor(e,t="/github-copilot/chat/token",n="COPILOT_AUTH_TOKEN"){o(this,"tokenEndpoint",void 0),o(this,"storageKey",void 0),o(this,"ssoOrgIDs",void 0),o(this,"currentAuthTokenRequest",void 0),o(this,"copilotLocalStorage",void 0),this.ssoOrgIDs=e,this.currentAuthTokenRequest=null,this.copilotLocalStorage=(0,i.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),this.storageKey=n,this.tokenEndpoint=t}}},10529:(e,t,n)=>{var r,i=n(11110),s=n(74848),o=n(95776),a=n(61663),l=n(65615),c=n(7426),d=n(82610),u=n(97286),h=n(96540),p=n(62456),m=n(5796),f=n(2976),g=n(47584),x=n(88782),b=n(90524),v=n(38621),w=n(52464),y=n(75177),j=n(89169),C=n(30631),S=n(10871),_=n(87330),k=n(16184),I=n(44968);function N({lineNumbers:e,lines:t,trimLineBeginnings:n}){return(0,s.jsx)(y.A,{sx:{display:"flex",flexDirection:"row",overflowX:"auto",pb:3},children:(0,s.jsx)("table",{style:{fontSize:"12px",fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace",overflowX:"auto"},children:e.map((e,r)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e},e),(0,s.jsx)("td",{style:{whiteSpace:"pre",paddingLeft:"16px"},children:(0,s.jsx)(I.mo,{html:n?(t[r]??"").trimStart():t[r]||"\n"},`line-${r}`)})]},`line-row-${e}`))})})}try{N.displayName||(N.displayName="SimpleCodeListing")}catch{}function O({reference:e,details:t,detailsLoading:n,detailsError:r,onDismiss:i}){let{contributors:o}=(0,x.u)(e.repoOwner,e.repoName,e.commitOID,e.path),[a]=(0,b.E)(e.repoOwner,e.repoName,e.commitOID,e.path),{lines:l,lineNumbers:c,expandUp:d,expandDown:u}=function(e,t,n){let r=(0,h.useRef)(e?.start??-1),i=(0,h.useRef)(e?.end??-1),[s,o]=(0,h.useState)(n&&e&&t?n.slice(e.start-t.start,e.end-t.start+1):[]),a=(0,h.useCallback)(()=>{n&&e&&t&&!(r.current<0)&&!(i.current<0)&&o(n.slice(r.current-t.start,i.current-t.start+1))},[n,e,t]);(0,h.useEffect)(()=>{e&&n&&(-1===r.current||-1===i.current)&&(r.current=e.start,i.current=e.end,a())},[n,e,t,a]);let l=(0,h.useCallback)(()=>{r.current=Math.max(r.current-T,t?.start??-1),a()},[t?.start,a]),c=(0,h.useCallback)(()=>{i.current=Math.min(i.current+T,t?.end??-1),a()},[t?.end,a]),d=-1!==r.current&&r.current!==t?.start,u=-1!==i.current&&i.current!==t?.end;return{lines:s,lineNumbers:s.map((e,t)=>r.current+t),expandUp:d?l:null,expandDown:u?c:null}}(t?.range,t?.expandedRange,t?.highlightedContents),g=t?.headerInfo;return(0,s.jsxs)(k.O.Frame,{children:[(0,s.jsxs)(k.O.Header,{onDismiss:i,children:[(0,s.jsx)(p.r,{square:t?.repoIsOrgOwned,src:`${e.repoOwner}.png`,sx:{mr:2,flexShrink:0}}),(0,s.jsxs)(w.A,{sx:{fontWeight:600,whiteSpace:"nowrap"},children:[e.repoOwner,"/",e.repoName]}),(0,s.jsx)(w.A,{sx:{marginX:1},children:"\xb7"}),(0,s.jsx)(w.A,{sx:{fontWeight:400},children:(0,f.gE)(e.ref)}),(0,s.jsx)(w.A,{sx:{marginX:1},children:"\xb7"}),(0,s.jsx)(w.A,{sx:{fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",direction:"rtl"},children:e.path}),"snippet"===e.type&&(0,s.jsxs)("span",{children:[":",e.range.start,"-",e.range.end]})]}),(0,s.jsxs)(k.O.Body,{detailsError:r,detailsLoading:n,children:[(0,s.jsxs)(y.A,{sx:{border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px 6px 0 0",marginX:3},children:[(0,s.jsxs)(A,{children:[g&&(0,s.jsx)(R,{headerInfo:g}),g&&(0,s.jsx)(D,{headerInfo:g})]}),d&&(0,s.jsx)(k.O.ContentExpander,{direction:"above",onExpand:d}),(0,s.jsx)(k.O.Content,{children:(0,s.jsx)(N,{lines:l,lineNumbers:c})}),u&&(0,s.jsx)(k.O.ContentExpander,{direction:"below",onExpand:u})]}),(0,s.jsxs)(k.O.Details,{children:[(0,s.jsxs)(k.O.DetailLink,{href:(0,m.Do2)({name:e.repoName,ownerLogin:e.repoOwner}),icon:v.RepoIcon,children:[e.repoOwner,"/",e.repoName]}),o&&(0,s.jsxs)(k.O.DetailLink,{icon:v.PeopleIcon,href:(0,m.buO)({owner:e.repoOwner,repo:e.repoName,commitish:e.commitOID,filePath:e.path,lineNumber:t?.range.start}),children:[o.totalCount," ",1===o.totalCount?"contributor":"contributors"]}),a&&(0,s.jsxs)(k.O.DetailLink,{icon:v.HistoryIcon,href:(0,m.$Qz)({owner:e.repoOwner,repo:e.repoName,commitish:a?.oid}),children:[a?.author?.displayName," updated ",(0,s.jsx)(j.A,{datetime:a?.date})]}),(0,s.jsxs)(k.O.DetailLink,{icon:v.LinkExternalIcon,href:e.url,children:[e.repoOwner,"/",e.repoName,"/",e.path,"snippet"===e.type?(0,s.jsxs)(s.Fragment,{children:["#",e.range.start,"-",e.range.end]}):null]})]})]})]})}function A({children:e}){return(0,s.jsx)(y.A,{sx:{p:2,display:"flex",flex:1,alignItems:"center",justifyContent:"space-between",backgroundColor:"canvas.subtle",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px 6px 0px 0px"},children:e})}function R({headerInfo:e}){return(0,s.jsx)(C.A,{title:e.blobSize,inline:!0,sx:{maxWidth:"100%",color:"fg.subtle"},"data-testid":"blob-size",children:(0,s.jsx)("span",{children:`${e.lineInfo.truncatedLoc} lines (${e.lineInfo.truncatedSloc} loc) \xb7 ${e.blobSize}`})})}function D({headerInfo:e}){let t=new URL(e.rawBlobUrl,g.fV.origin);t.searchParams.set("download","");let n={"aria-label":"Download raw content",icon:v.DownloadIcon,size:"small",onClick:async()=>{e.isLfs||await E(e.rawBlobUrl,e.displayName)},"data-testid":"download-raw-button",sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0}};return(0,s.jsxs)(y.A,{sx:{display:"flex"},children:[(0,s.jsx)(S.z,{href:e.rawBlobUrl,download:e.viewable?void 0:"true",size:"small",sx:{linkButtonSx:L,px:2,borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"none"},"data-testid":"raw-button",children:"Raw"}),e.isLfs?(0,s.jsx)(_.K,{unsafeDisableTooltip:!0,as:"a","data-turbo":"false",href:t.toString(),...n}):(0,s.jsx)(_.K,{unsafeDisableTooltip:!0,...n})]})}let T=25,L={"&:hover:not([disabled])":{textDecoration:"none"},"&:focus:not([disabled])":{textDecoration:"none"},"&:active:not([disabled])":{textDecoration:"none"}};async function E(e,t){let n=await fetch(e,{method:"get"}),r=await n.blob(),i=document.createElement("a");i.setAttribute("download",t);let s=URL.createObjectURL(r);i.href=s,i.setAttribute("target","_blank"),i.click(),URL.revokeObjectURL(s)}try{O.displayName||(O.displayName="CodeReferencePreview")}catch{}try{A.displayName||(A.displayName="BlobPreviewHeader")}catch{}try{R.displayName||(R.displayName="BlobSize")}catch{}try{D.displayName||(D.displayName="RawButtons")}catch{}var P=n(30729),M=n(58011);function $({reference:e,detailsLoading:t,detailsError:n,onDismiss:r}){return(0,s.jsxs)(k.O.Frame,{children:[(0,s.jsxs)(k.O.Header,{onDismiss:r,children:[(0,s.jsx)(P.A,{icon:v.GitCommitIcon,sx:{mr:2}}),(0,s.jsx)(y.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:e.message})]}),(0,s.jsxs)(k.O.Body,{detailsError:n,detailsLoading:t,children:[(0,s.jsxs)(y.A,{sx:{display:"flex",flexDirection:"row",p:3},children:[(0,s.jsx)(p.r,{src:`${e.author.login}.png`,sx:{mr:2,flexShrink:0}}),(0,s.jsx)(y.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",direction:"rtl"},children:e.author.login})]}),(0,s.jsx)(y.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}}),(0,s.jsx)(k.O.Content,{children:(0,s.jsx)(M.To,{markdown:e.message})}),(0,s.jsx)(y.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}}),(0,s.jsxs)(k.O.Details,{children:[(0,s.jsxs)(k.O.DetailLink,{href:(0,m.Do2)({name:e.repository.name,ownerLogin:e.repository.owner}),icon:v.RepoIcon,children:[e.repository.owner,"/",e.repository.name]}),(0,s.jsxs)(k.O.DetailLink,{href:e.permalink,icon:v.LinkExternalIcon,children:[e.repository.owner,"/",e.repository.name,"/commit/",e.oid]})]})]})]})}try{$.displayName||($.displayName="CommitReferencePreview")}catch{}var F=n(23976);function B({reference:e,details:t,detailsLoading:n,detailsError:r,onDismiss:i}){let{contributors:o}=(0,x.u)(e.repoOwner,e.repoName,e.commitOID,e.path),[a]=(0,b.E)(e.repoOwner,e.repoName,e.commitOID,e.path);return(0,s.jsxs)(k.O.Frame,{children:[(0,s.jsxs)(k.O.Header,{onDismiss:i,children:[(0,s.jsx)(p.r,{square:t?.repoIsOrgOwned,src:`${e.repoOwner}.png`,sx:{mr:2,flexShrink:0}}),(0,s.jsxs)(w.A,{sx:{fontWeight:600,whiteSpace:"nowrap"},children:[e.repoOwner,"/",e.repoName]}),(0,s.jsx)(w.A,{sx:{marginX:1},children:"\xb7"}),(0,s.jsx)(w.A,{sx:{fontWeight:400},children:(0,f.gE)(e.ref)}),(0,s.jsx)(w.A,{sx:{marginX:1},children:"\xb7"}),(0,s.jsx)(w.A,{sx:{fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",direction:"rtl"},children:e.path})]}),(0,s.jsxs)(k.O.Body,{detailsLoading:n,detailsError:r,children:[t&&(0,s.jsx)(V,{details:t}),(0,s.jsxs)(k.O.Details,{children:[(0,s.jsxs)(k.O.DetailLink,{href:(0,m.Do2)({name:e.repoName,ownerLogin:e.repoOwner}),icon:v.RepoIcon,children:[e.repoOwner,"/",e.repoName]}),o&&(0,s.jsxs)(k.O.DetailLink,{icon:v.PeopleIcon,href:(0,m.buO)({owner:e.repoOwner,repo:e.repoName,commitish:e.commitOID,filePath:e.path,lineNumber:t?.range.start}),children:[o.totalCount," contributors"]}),a&&(0,s.jsxs)(k.O.DetailLink,{icon:v.HistoryIcon,href:(0,m.$Qz)({owner:e.repoOwner,repo:e.repoName,commitish:a?.oid}),children:[a?.author?.displayName," updated ",(0,s.jsx)(j.A,{datetime:a?.date})]}),(0,s.jsxs)(k.O.DetailLink,{icon:v.LinkExternalIcon,href:e.url,children:[e.repoOwner,"/",e.repoName,"/",e.path,t?(0,s.jsxs)(s.Fragment,{children:["#",t.range.start,"-",t.range.end]}):null]})]})]})]})}function V({details:e}){let[t,n]=(0,h.useState)(e.range.start),[r,i]=(0,h.useState)(e.range.end),o=(0,h.useMemo)(()=>W(e.contents,e.contents.length),[e.contents]),[a,l]=(0,h.useState)("preview"),c=e?.headerInfo,d=(0,h.useCallback)(()=>{n(function(e,t){let n=z(e,t),r=function(e){let t;for(let n of e)t=n;return t}(e.slice(0,n).matchAll(/^#+\s/gm));return W(e,r?.index??0)}(e.contents,t))},[e.contents,t]),u=(0,h.useCallback)(()=>{let t=r;for(;t<o&&t<r+10;)t=function(e,t){let n=z(e,t),r=e.slice(n).match(/^#+\s/m),i=r?n+r.index:e.length;return W(e,i)}(e.contents,t+1);i(t-1)},[e.contents,r,o]),p=(0,h.useMemo)(()=>{let n=e.contents;if(t){let e=function(e,t,n=t-1){let r=-1,i=-1,s=-1;for(let o=1;;o++){if(o===t&&(i=r+1),o===n+1){s=r;break}if(-1===(r=e.indexOf("\n",r+1)))break}return{startIndex:i,endIndex:s}}(n,t,r);e.endIndex>-1&&(n=n.slice(e.startIndex,e.endIndex)),n=n.replace(/^---\n[\s\S]*?\n---\n/,"")}return n},[e.contents,t,r]);return(0,s.jsxs)(y.A,{sx:{border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px 6px 0 0",marginX:3},children:[(0,s.jsxs)(A,{children:[(0,s.jsxs)(y.A,{sx:{display:"flex",alignItems:"baseline",gap:2},children:[(0,s.jsxs)(F.I,{"aria-label":"File view",size:"small",onChange:e=>{let t=["preview","code"][e];t&&a!==t&&l(t)},sx:{fontSize:1},children:[(0,s.jsx)(F.I.Button,{selected:"preview"===a,children:"Preview"},"preview'"),(0,s.jsx)(F.I.Button,{selected:"code"===a,children:"Code"},"raw")]}),c&&(0,s.jsx)(R,{headerInfo:c})]}),c&&(0,s.jsx)(D,{headerInfo:c})]}),t>1&&(0,s.jsx)(k.O.ContentExpander,{direction:"above",onExpand:d}),(0,s.jsx)(k.O.Content,{children:"preview"===a?(0,s.jsx)(y.A,{className:"js-snippet-clipboard-copy-unpositioned",sx:{".highlighted":{backgroundColor:e=>`${e.colors.accent.subtle}`}},children:(0,s.jsx)(M.To,{markdown:p,openLinksInCurrentTab:!1})}):(0,s.jsx)("code",{children:(0,s.jsx)(y.A,{as:"pre",sx:{overflowX:"auto"},children:e.contents})})}),r<o&&(0,s.jsx)(k.O.ContentExpander,{direction:"below",onExpand:u})]})}function W(e,t){return function(e){let t=0;for(let n of e)t++;return t}(e.slice(0,t).matchAll(/\n/g))+1}function z(e,t){if(1===t)return 0;let n=-1;for(let r=2;r<=t;r++)if(-1===(n=e.indexOf("\n",n+1)))return e.length;return n+1}try{B.displayName||(B.displayName="MarkdownReferencePreview")}catch{}try{V.displayName||(V.displayName="MarkdownReferencePreviewContent")}catch{}function H({reference:e,detailsLoading:t,detailsError:n,onDismiss:r}){return(0,s.jsxs)(k.O.Frame,{children:[(0,s.jsxs)(k.O.Header,{onDismiss:r,children:[(0,s.jsx)(P.A,{icon:v.GitCommitIcon,sx:{mr:2}}),(0,s.jsx)(y.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:e.title})]}),(0,s.jsxs)(k.O.Body,{detailsError:n,detailsLoading:t,children:[(0,s.jsxs)(y.A,{sx:{display:"flex",flexDirection:"row",p:3},children:[(0,s.jsx)(p.r,{src:`${e.authorLogin}.png`,sx:{mr:2,flexShrink:0}}),(0,s.jsx)(y.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",direction:"rtl"},children:e.authorLogin})]}),(0,s.jsx)(y.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}}),(0,s.jsx)(k.O.Content,{children:(0,s.jsx)(M.To,{markdown:e.title})}),(0,s.jsx)(y.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}}),(0,s.jsxs)(k.O.Details,{children:[(0,s.jsxs)(k.O.DetailLink,{href:(0,m.Do2)({name:e.repository.name,ownerLogin:e.repository.ownerLogin}),icon:v.RepoIcon,children:[e.repository.ownerLogin,"/",e.repository.name]}),(0,s.jsx)(k.O.DetailLink,{href:e.url,icon:v.LinkExternalIcon,children:e.url})]})]})]})}try{H.displayName||(H.displayName="PullRequestReferencePreview")}catch{}function U({reference:e,details:t,detailsLoading:n,detailsError:r,onDismiss:i}){let o=new Map,a=new Map;if(t?.kind==="suggestionSymbol")for(let e of t.suggestionDefinitions??[]){if(!e.highlightedContents)continue;let t=`${e.repoOwner}/${e.repoName}/${e.path}`;o.has(t)||o.set(t,[]),o.get(t).push(e)}else if(t?.kind==="codeNavSymbol"){for(let e of t.codeNavDefinitions??[]){if(!e.highlightedContents)continue;let t=`${e.repoOwner}/${e.repoName}/${e.path}`;o.has(t)||o.set(t,[]),o.get(t).push(e)}for(let e of t?.codeNavReferences??[]){if(!e.highlightedContents)continue;let t=`${e.repoOwner}/${e.repoName}/${e.path}`;a.has(t)||a.set(t,[]),a.get(t).push(e)}}let l=[...o.values()][0]?.[0]??[...a.values()][0]?.[0],c=o.size>0,d=a.size>0,u=[...o.values()].length,h=[...o.values()].reduce((e,t)=>e+t.length,0),p=[...a.values()].length,f=[...a.values()].reduce((e,t)=>e+t.length,0),{contributors:g}=(0,x.u)(l?.repoOwner,l?.repoName,l?.commitOID,l?.path),[w]=(0,b.E)(l?.repoOwner,l?.repoName,l?.commitOID,l?.path);return(0,s.jsxs)(k.O.Frame,{children:[(0,s.jsx)(k.O.Header,{onDismiss:i,children:e.name}),(0,s.jsxs)(k.O.Body,{detailsError:r,detailsLoading:n,children:[c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(k.O.SectionDivider,{children:[h," ",1===h?"definition":"definitions",u>1?` across ${u} files`:null]}),[...o.values()].map((e,t)=>(0,s.jsx)(k.O.CollapsibleSubsection,{title:e[0].path,initiallyOpen:0===t,children:(0,s.jsx)(k.O.Content,{children:e.map((e,t)=>e.highlightedContents?(0,s.jsx)(N,{trimLineBeginnings:1===e.highlightedContents.length,lines:e.highlightedContents,lineNumbers:q(e)},t):null)})},e[0].path))]}),d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(k.O.SectionDivider,{children:[f," ",1===f?"reference":"references",p>1?` across ${p} files`:null]}),[...a.values()].map((e,t)=>(0,s.jsx)(k.O.CollapsibleSubsection,{title:e[0].path,initiallyOpen:0===t&&!c,children:(0,s.jsx)(k.O.Content,{children:e.map((e,t)=>e.highlightedContents?(0,s.jsx)(N,{trimLineBeginnings:1===e.highlightedContents.length,lines:e.highlightedContents,lineNumbers:q(e)},t):null)})},e[0].path))]}),(0,s.jsxs)(k.O.Details,{children:[l&&(0,s.jsxs)(k.O.DetailLink,{href:(0,m.Do2)({name:l.repoName,ownerLogin:l.repoOwner}),icon:v.RepoIcon,children:[l.repoOwner,"/",l.repoName]}),g&&l&&(0,s.jsxs)(k.O.DetailLink,{icon:v.PeopleIcon,href:(0,m.buO)({owner:l.repoOwner,repo:l.repoName,commitish:l.commitOID,filePath:l.path}),children:[g.totalCount," ",1===g.totalCount?"contributor":"contributors"]}),w&&l&&(0,s.jsxs)(k.O.DetailLink,{icon:v.HistoryIcon,href:(0,m.$Qz)({owner:l.repoOwner,repo:l.repoName,commitish:w?.oid}),children:[w?.author?.displayName," updated ",(0,s.jsx)(j.A,{datetime:w?.date})]}),l&&(0,s.jsxs)(k.O.DetailLink,{icon:v.LinkExternalIcon,href:(0,m.nD_)({owner:l.repoOwner,repo:l.repoName,commitish:l.commitOID,filePath:l.path}),children:[l.repoOwner,"/",l.repoName,"/",l.path]})]})]})]})}function q({range:e}){return e?Array(e.end-e.start+1).fill(null).map((t,n)=>e.start+n):[]}try{U.displayName||(U.displayName="SymbolReferencePreview")}catch{}let G=e=>e?.start?e.end?`${e.start}-${e.end}`:`${e.start}`:"",J=e=>{let t=G(e.selectedRange),n=e.url.split(window.location.host)[1];return{href:e.url+t,path:n+t,range:t}};function K({reference:e,details:t,detailsLoading:n,detailsError:r,onDismiss:i}){let o=e.headFile??e.baseFile,{contributors:a}=(0,x.u)(o.repoOwner,o.repoName,o.commitOID,o.path),[l]=(0,b.E)(o.repoOwner,o.repoName,o.commitOID,o.path),{href:c,path:d,range:u}=J(e);return(0,s.jsxs)(k.O.Frame,{children:[(0,s.jsxs)(k.O.Header,{onDismiss:i,children:[(0,s.jsx)(p.r,{square:t?.repoIsOrgOwned,src:`${o.repoOwner}.png`,sx:{mr:2,flexShrink:0}}),(0,s.jsxs)(y.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[o.repoOwner,"/",o.repoName,"/",o.path," ",u]})]}),(0,s.jsx)(k.O.Body,{detailsError:r,detailsLoading:n,children:(0,s.jsxs)(k.O.Details,{children:[(0,s.jsxs)(k.O.DetailLink,{href:(0,m.Do2)({name:o.repoName,ownerLogin:o.repoOwner}),icon:v.RepoIcon,children:[o.repoOwner,"/",o.repoName]}),a&&(0,s.jsxs)(k.O.DetailLink,{icon:v.PeopleIcon,href:(0,m.buO)({owner:o.repoOwner,repo:o.repoName,commitish:o.commitOID,filePath:o.path}),children:[a.totalCount," ",1===a.totalCount?"contributor":"contributors"]}),l&&(0,s.jsxs)(k.O.DetailLink,{icon:v.HistoryIcon,href:(0,m.$Qz)({owner:o.repoOwner,repo:o.repoName,commitish:l?.oid}),children:[l?.author?.displayName," updated ",(0,s.jsx)(j.A,{datetime:l?.date})]}),(0,s.jsx)(k.O.DetailLink,{icon:v.LinkExternalIcon,href:c,children:d})]})})]})}try{K.displayName||(K.displayName="FileDiffReferencePreview")}catch{}var Z=n(91295);function X({dismissable:e}){let{reference:t,details:n,detailsLoading:r,detailsError:i,dismissReference:o}=Y();return(0,s.jsx)(Q,{reference:t,details:n,detailsLoading:r,detailsError:i,onDismiss:e?o:void 0})}function Q({reference:e,details:t,detailsLoading:n,detailsError:r,onDismiss:i}){switch(e.type){case"symbol":return(0,s.jsx)(U,{reference:e,details:t,detailsLoading:n,detailsError:r,onDismiss:i},(0,d.Vb)(e));case"file":case"snippet":return"Markdown"===e.languageName?(0,s.jsx)(B,{reference:e,details:t,detailsError:r,detailsLoading:n,onDismiss:i},(0,d.Vb)(e)):(0,s.jsx)(O,{reference:e,details:t,detailsLoading:n,detailsError:r,onDismiss:i},(0,d.Vb)(e));case"file-diff":return(0,s.jsx)(K,{reference:e,details:t,detailsLoading:n,detailsError:r,onDismiss:i},(0,d.Vb)(e));case"commit":return(0,s.jsx)($,{reference:e,detailsLoading:n,detailsError:r,onDismiss:i},(0,d.Vb)(e));case"pull-request":return(0,s.jsx)(H,{reference:e,detailsLoading:n,detailsError:r,onDismiss:i},(0,d.Vb)(e));case"web-search":return(0,s.jsx)(Z.I,{reference:e,onDismiss:i},(0,d.Vb)(e));default:return null}}function Y(){let e=(0,c.b)(),t=(0,l.Pk)().selectedReference,{isLoading:n,isError:r,data:i}=(0,u.I)({queryKey:["copilot-reference-preview","copilot","references",t?.type,t?(0,d.Vb)(t):void 0],queryFn:async()=>{if(!t)return null;let n=await e.service.hydrateReference(t);return n.ok?n.payload:null},staleTime:Number.MIN_VALUE});return{reference:t,dismissReference:(0,h.useCallback)(()=>e.selectReference(null),[e]),details:i??void 0,detailsLoading:n,detailsError:r}}try{X.displayName||(X.displayName="CopilotReferencePreview")}catch{}try{Q.displayName||(Q.displayName="CopilotReferencePreviewImpl")}catch{}function ee(){let{dismissReference:e,reference:t}=Y(),{screenSize:n}=(0,a.lm)(),r=n<a.Gy.large,i=t?.type==="web-search"?`Bing search results for "${t.query}"`:"Reference";return(0,s.jsxs)(o.A,{"aria-label":i,isOpen:!!t,onDismiss:e,sx:{display:"flex",flexDirection:"column",overflow:"hidden",borderRadius:"var(--borderRadius-large)",margin:0,...r?{height:["auto","auto"],top:"1dvh",width:"90dvw"}:{top:"10vh",width:"50dvw",maxWidth:"1024px"}},children:[(0,s.jsx)(o.A.Header,{children:i}),(0,s.jsx)(X,{})]})}try{ee.displayName||(ee.displayName="CopilotReferencePreviewDialog")}catch{}var et=n(4460),en=n(97074),er=n(79317),ei=n(57572),es=n(98939),eo=n(55847),ea=n(94977),el=n(18312),ec=n(45492),ed=n(75632),eu=n(46988),eh=n(11499),ep=n(46928),em=n(12304),ef=n(34164),eg=n(96558),ex=n(10967),eb=n(37937);let ev={copilotChatPanel:"ChatPanel-module__copilotChatPanel--YfhVH"};var ew=n(62064);let ey=()=>{let e=(0,l.Pk)(),t=(0,c.b)(),n=t.getSelectedThread(e);return(0,s.jsx)(ew.v,{tabIndex:-1,id:"copilot-floating-button",icon:v.CopilotIcon,label:"Open Copilot chat","aria-controls":eg.wJ,tooltipDirection:"w",onClick:()=>{t.openChat(n,e.currentView,"floating-button-v2",e.chatVisibleSettingPath)},sx:{"--floating-button-size":"2.5rem",position:"fixed",bottom:3,right:3,zIndex:9,color:"fg.default !important",bg:"var(--bgColor-default, var(--color-canvas-default))",borderRadius:"var(--floating-button-size)",border:"none",boxShadow:"var(--shadow-floating-small)",height:"var(--floating-button-size)",width:"var(--floating-button-size)","&:focus, &:active":{boxShadow:"var(--shadow-floating-small, var(--shadow-small))"}},"data-hotkey":"Shift+Z"})};try{ey.displayName||(ey.displayName="FloatingButton")}catch{}var ej=n(89401);let eC=e=>{let{children:t,initialFocusRef:n,staffDialogRef:r,handleClose:i,panelWidth:o,panelHeight:a,startResize:u,onResizerKeyDown:p}=e,m=(0,l.Pk)(),{chatIsOpen:f,chatIsVisible:g,currentTopic:x}=m,b=m.entryPointId??eg.fv,v=(0,h.useRef)(null),w=(0,h.useRef)(null);(0,h.useEffect)(()=>{let e=document.getElementById(b);w.current=e},[b]);let j=(0,h.useCallback)(()=>{v.current&&v.current.contains(document.activeElement)&&i(!0)},[i]),C=(0,c.b)(),S=C.getSelectedThread(m),_=(0,ep.Z)();return(0,s.jsx)(s.Fragment,{children:f?(0,s.jsxs)(em.Ay,{id:eg.wJ,className:(0,ef.$)(ev.copilotChatPanel),ref:v,portalContainerName:ej.Gj,onEscape:j,onClickOutside:()=>{},ignoreClickRefs:[r],initialFocusRef:n,returnFocusRef:w,sx:{maxWidth:"calc(100vw - 2rem)",height:f?`${a}px`:"48px",maxHeight:"calc(100vh - 1rem - 60px)",minHeight:f?`${ex.cx}px`:void 0,width:f?`${o}px`:"400px",minWidth:`${ex.Ld}px`},right:8,bottom:8,anchorSide:"inside-top",position:"fixed",role:"dialog","aria-labelledby":eg.Qs,children:[(0,s.jsx)(eh.ak,{commands:{"copilot-chat:close-assistive":()=>C.closeChat()}}),(0,s.jsx)(eh.tL,{commands:{"copilot-chat:continue-in-immersive":()=>{(0,eu.BI)("dotcom_chat.activate",{target:"IMMERSIVE_OPTION",mode:"assistive"}),eb.J.setCurrentReferences(S?.id??null,m.currentReferences),S?_(`${d.Jz}/c/${S.id}`):x&&(0,d.Z6)(x)?_(`${d.Jz}/r/${x.ownerLogin}/${x.name}`):_(d.Jz)}},children:(0,s.jsx)("section",{id:eg.Qs,"aria-label":"Copilot chat panel",style:{height:"100%"},children:(0,s.jsxs)(y.A,{sx:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},"data-testid":eg.Qs,children:[(0,s.jsx)(y.A,{id:"vertical-resize-click-target",sx:{position:"absolute",inset:0,height:"0.5rem",width:"100%",cursor:f?"ns-resize":void 0,zIndex:2},onMouseDown:e=>u(e,!1,!0)}),(0,s.jsx)(y.A,{sx:{position:"absolute",inset:0,height:"100%",width:"8px",cursor:f?"ew-resize":void 0,zIndex:2},onMouseDown:e=>u(e,!0,!1)}),(0,s.jsx)(y.A,{sx:{position:"absolute",inset:0,height:"0.5rem",width:"0.5rem",cursor:f?"nwse-resize":"undefined",zIndex:2},"aria-label":"Chat panel resizer","aria-valuetext":`${o}, ${a}`,"aria-valuenow":o,role:"separator",onMouseDown:e=>u(e,!0,!0),tabIndex:0,onKeyDown:p}),(0,s.jsx)(y.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,maxHeight:"100%"},children:t})]})})})]}):g&&!(0,ed.G7)("copilot_no_floating_button")?(0,s.jsx)(ey,{}):null})};try{eC.displayName||(eC.displayName="ChatPanel")}catch{}var eS=n(77731),e_=n(57516),ek=n(84217),eI=n(47139),eN=n(89323),eO=n(8338),eA=n(77342),eR=n(2622),eD=n(14987),eT=n(25408),eL=n(16255),eE=n(73451),eP=n(34614),eM=n(9591),e$=n(74144),eF=n(48247);let eB=({onDismiss:e,experimentsDialogRef:t})=>{let[n,r]=(0,h.useState)(()=>(0,eF.f)().join(",")),[i,o]=(0,h.useState)(void 0),a=(0,h.useRef)("\u200B"),l=()=>{let t=[];for(let e of n.split(","))if(""!==e.trim()){if(2!==e.split("=").length){o(`Invalid experiment key=value pair${a.current}`),a.current+="\u200B";return}o(""),t.push(e)}(0,eF.R)(t),e()};return(0,s.jsx)(eL.Z,{children:(0,s.jsxs)(e$.l,{ref:t,onClose:e,title:"Experiments",width:"xlarge",children:[(0,s.jsx)(e$.l.Body,{children:(0,s.jsx)(y.A,{sx:{p:3},children:(0,s.jsxs)(eE.A,{children:[(0,s.jsx)(eE.A.Label,{children:"Experiments"}),(0,s.jsx)(eE.A.Caption,{children:(0,s.jsxs)("span",{children:["List experiments as comma separated ",(0,s.jsx)("code",{children:"key=value"})," pairs. To see available experiments,"," ",(0,s.jsx)(eP.A,{inline:!0,target:"_blank",href:`/search?q=${encodeURIComponent("repo:github/copilot-api path:experiments.go")}`,children:"read this code"}),"."]})}),(0,s.jsx)(eM.A,{sx:{width:"100%",my:2},"aria-label":"Experiments",name:"experiments",value:n,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&l()}}),i&&(0,s.jsx)(eE.A.Validation,{variant:"error",children:i})]})})}),(0,s.jsx)(e$.l.Footer,{children:(0,s.jsx)(e$.l.Buttons,{buttons:[{type:"button",onClick:e,content:"Cancel"},{type:"submit",onClick:l,content:"Save",buttonType:"primary"}]})})]})})};try{eB.displayName||(eB.displayName="ExperimentsDialog")}catch{}var eV=n(57393);let eW=({dialogType:e,onDismiss:t,staffDialogRef:n})=>(0,s.jsxs)(s.Fragment,{children:[e===eA.hs.Experiments&&(0,s.jsx)(eB,{experimentsDialogRef:n,onDismiss:t}),e===eA.hs.Prompt&&(0,s.jsx)(eV.X,{promptDialogRef:n,onDismiss:t})]});try{eW.displayName||(eW.displayName="StaffDialogs")}catch{}let ez=e=>{let t=(0,l.Pk)(),n=(0,c.b)(),[r,i]=(0,h.useState)(!1),o=n.getSelectedThread(t),{showTopicPicker:a,messages:d,streamingMessage:u}=t,p=o?.name??t.restoredThreadTitle,m=(0,h.useCallback)(async()=>o&&n.deleteThread(o),[o,n]),f=(0,ed.G7)("lifecycle_label_name_updates"),g=(0,ed.G7)("copilot_no_floating_button"),x=(0,h.useRef)(null);return(0,s.jsxs)(y.A,{sx:{display:"flex",gap:2,p:2,pl:"immersive"===t.mode?1:3,borderBottom:a?"none":"1px solid",borderColor:"border.default",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(y.A,{sx:{display:"flex",flex:1,minWidth:0},children:"thread"===t.currentView?!a&&!e.isImmersive&&0===d.length&&t.chatIsOpen&&(0,s.jsx)(ek.A,{as:"h2",sx:{fontSize:1,display:"flex",alignItems:"center",flexGrow:1,gap:2,minWidth:0,cursor:"default"},children:"thread"===t.currentView?(0,s.jsx)(s.Fragment,{children:p?(0,s.jsx)("span",{className:"Truncate",children:(0,s.jsx)("span",{className:"Truncate-text",title:p,children:p})}):e.isResponding&&!t.chatIsOpen?(0,s.jsx)(s.Fragment,{children:"Responding\u2026"}):t.chatIsOpen?!a&&(0,s.jsx)(s.Fragment,{children:"New conversation"}):(0,s.jsx)(s.Fragment,{children:"Ask Copilot"})}):"Copilot"}):(0,s.jsx)(eH,{})}),(0,s.jsxs)(y.A,{sx:{display:"flex",alignItems:"center"},children:[t.chatIsOpen&&(0,s.jsxs)(s.Fragment,{children:[t.renderBetaLabel&&(f?(0,s.jsx)(eS.X,{className:"mr-2"}):(0,s.jsx)(eI.A,{variant:"success",sx:{mr:2},children:"Beta"})),"thread"===t.currentView?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ew.v,{hidden:0===d.length,variant:"invisible",icon:v.PlusIcon,label:"New conversation",tooltipDirection:"s",onClick:async()=>{await n.selectThread(null)},sx:{color:"fg.muted"}}),(0,s.jsx)(eU,{anchorRef:x,handleDelete:m,thread:o,setShowStaffDialog:e.setShowStaffDialog,setShowPersonalInstructionsDialog:i})]}):(0,s.jsx)(ew.v,{variant:"invisible",icon:v.PlusIcon,label:"New conversation",tooltipDirection:"w",onClick:async()=>{await n.selectThread(null)},sx:{color:"fg.muted"}})]}),!e.isImmersive&&(0,s.jsxs)(s.Fragment,{children:[t.chatIsOpen&&(0,s.jsx)(y.A,{sx:{mx:2,height:"20px",width:"1px",bg:"border.muted"}}),(0,s.jsx)(eh.N5,{commandId:"copilot-chat:continue-in-immersive",variant:"invisible",icon:v.ScreenFullIcon,"aria-label":"Continue in immersive",disabled:!!u,sx:{color:"fg.muted"},tooltipDirection:"sw"}),g?(0,s.jsx)(eh.N5,{commandId:"copilot-chat:close-assistive",variant:"invisible",icon:v.XIcon,tooltipDirection:"sw",sx:{color:"fg.muted"}}):(0,s.jsx)(ew.v,{variant:"invisible",icon:t.chatIsOpen?v.ChevronDownIcon:v.ChevronUpIcon,label:t.chatIsOpen?"Collapse":"Expand",tooltipDirection:t.chatIsOpen?"sw":"w",onClick:t.chatIsOpen?()=>n.closeChat():()=>n.openChat(o,t.currentView,"header",t.chatVisibleSettingPath),sx:{color:"fg.muted"},"data-hotkey":"Shift+Z"})]})]}),(0,s.jsx)(eW,{dialogType:e.showStaffDialog,staffDialogRef:e.staffDialogRef,onDismiss:()=>e.setShowStaffDialog(eA.hs.None)}),r&&(0,s.jsx)(eT.Y,{returnFocusRef:x,onDismiss:()=>i(!1)})]})},eH=()=>{let{mode:e}=(0,l.Pk)(),t=(0,c.b)();return(0,s.jsx)(eo.Q,{leadingVisual:v.ArrowLeftIcon,variant:"invisible",onClick:()=>t.viewCurrentThread(),sx:{color:"fg.muted",marginLeft:"assistive"===e?"-8px":void 0},children:"Back"})},eU=e=>{let[t,n]=(0,h.useState)(!1),{chatVisibleSettingPath:r,currentTopic:i,mode:o,repoCustomInstructionsEnabled:a,currentReferences:u}=(0,l.Pk)(),p=(0,c.b)(),m=(0,h.useRef)(null),f=(0,ed.G7)("copilot_no_floating_button"),g=eR.W.staffPromptDialog,x=eR.W.repoCustomInstructions||eR.W.repoCustomInstructionsPreview,b=i?.customInstructions||[];eR.W.topicsAsReferences&&(b=(0,d.NJ)(u));let w=(0,h.useCallback)(()=>{p.fetchThreads(),p.viewAllThreads(),(0,eu.BI)("copilot.view-conversations-clicked")},[p]),y=(0,h.useMemo)(()=>(0,e_.X)(),[]),j=!e.thread;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(eN.W,{open:t,onOpenChange:()=>n(e=>!e),anchorRef:e.anchorRef,children:[(0,s.jsx)(eN.W.Anchor,{children:(0,s.jsx)(ew.v,{icon:v.KebabHorizontalIcon,variant:"invisible",label:"Conversation options",tooltipDirection:"s",hideTooltip:t,sx:{color:"fg.muted"}})}),(0,s.jsx)(ej.UJ,{children:(0,s.jsxs)(eO.l,{children:[x&&b.length>0&&(0,s.jsxs)(eO.l.Item,{onSelect:()=>{p.toggleRepoCustomInstructions(!a)},children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(v.NoteIcon,{})}),a?"Disable custom instructions":"Enable custom instructions"]}),(0,s.jsxs)(eO.l.Item,{variant:j?"default":"danger",onSelect:()=>{e.handleDelete(),n(!1)},disabled:j,"aria-describedby":"delete-conversation-description",children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(v.TrashIcon,{})}),"Delete conversation",(0,s.jsx)("p",{id:"delete-conversation-description",className:"sr-only",children:"This is a destructive action that cannot be undone"})]}),(0,s.jsx)(eO.l.Divider,{}),(0,s.jsxs)(eO.l.Item,{onSelect:()=>e.setShowPersonalInstructionsDialog(!0),children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(v.ToolsIcon,{})}),"Personal instructions"]}),"assistive"===o&&(0,s.jsxs)(eO.l.Item,{onSelect:w,children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(v.HistoryIcon,{})}),"View all conversations"]}),(0,s.jsxs)(eO.l.Item,{onSelect:()=>{m.current?.openDialog(),(0,eu.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"assistive"})},children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(v.CommentDiscussionIcon,{})}),"Give feedback"]}),"assistive"===o&&!f&&(0,s.jsxs)(eO.l.Item,{onSelect:()=>{p.hideChat(r)},children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(v.EyeClosedIcon,{})}),"Hide Copilot chat"]}),y&&(0,s.jsxs)(eO.l.Item,{onSelect:()=>e.setShowStaffDialog(eA.hs.Experiments),children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(v.BeakerIcon,{})}),"Configure experiments",(0,s.jsx)(eO.l.TrailingVisual,{children:(0,s.jsx)(eI.A,{variant:"attention",children:"Staff"})})]}),y&&g&&(0,s.jsxs)(eO.l.Item,{onSelect:()=>e.setShowStaffDialog(eA.hs.Prompt),children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(v.BeakerIcon,{})}),"Adjust prompts",(0,s.jsx)(eO.l.TrailingVisual,{children:(0,s.jsx)(eI.A,{variant:"attention",children:"Staff"})})]})]})})]}),(0,s.jsx)(eD.l,{ref:m,mode:"assistive"})]})};try{ez.displayName||(ez.displayName="Header")}catch{}try{eH.displayName||(eH.displayName="ReturnToCurrentThreadButton")}catch{}try{eU.displayName||(eU.displayName="ThreadOptionButton")}catch{}var eq=n(88117),eG=n(72334),eJ=n(26514),eK=n(35642),eZ=n(96339),eX=n(93326),eQ=n(78176),eY=n(72659),e0=n(26871),e1=n(47920);let e5={dialog:"CommandWindow-module__dialog--nK81t",copilotAvatar:"CommandWindow-module__copilotAvatar--ye1FK",commandListItemSelected:"CommandWindow-module__commandListItemSelected--EuUNl",chatMessageWrapper:"CommandWindow-module__chatMessageWrapper--KDhKM"};function e4({headingText:e,commands:t,onSelect:n}){return(0,s.jsx)(eO.l,{variant:"full",className:"my-2",children:(0,s.jsxs)(eO.l.Group,{children:[(0,s.jsx)(eO.l.GroupHeading,{as:"h4",className:"ml-n2",children:e}),t.map(e=>{let t=v[e.iconName];return(0,s.jsxs)(eO.l.Item,{className:(0,ef.$)("p-2",e.selected?e5.commandListItemSelected:""),onSelect:()=>n(e),children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(t,{})}),e.name,e.selected&&(0,s.jsx)(eO.l.TrailingVisual,{children:"Ask Copilot"})]},e.name)})]})})}try{e4.displayName||(e4.displayName="CommandList")}catch{}function e6({context:e}){if(!e)return;let t=function(e){if("pull-request"===e.type)return{name:`${e.number}`,icon:v.GitPullRequestIcon}}(e);if(!t)return;let{icon:n,name:r}=t;return(0,s.jsxs)("div",{className:"fgColor-muted bgColor-muted px-2 py-1 rounded-2 f6",children:[n&&(0,s.jsx)(n,{className:"mr-1 fgColor-open",size:"small"}),r]})}try{e6.displayName||(e6.displayName="ContextLabel")}catch{}var e8=n(60068);function e2({topic:e}){if(!e)return;let t={type:"repository",...e},n=(0,e8.a)(t,!1),r=(0,d.z$)(t);return(0,s.jsxs)(s.Fragment,{children:[n&&(0,s.jsx)(n,{className:"mr-1",size:"small"}),(0,s.jsx)("span",{className:"flex-1",children:r})]})}try{e2.displayName||(e2.displayName="TopicLabel")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}var e7=n(58665);let e9={Initial:"initial",Complete:"complete"};function e3(){let e=(0,l.Pk)(),{entryPointId:t,chatIsOpen:n,currentRepository:r}=e,i=(0,c.b)(),o=i.getSelectedThread(e),{reloadQuota:a}=(0,eq.x)(),u=(0,ep.Z)(),[p,m]=(0,h.useState)(e9.Initial),f=(0,h.useRef)(null),[g,x]=(0,h.useState)(""),b=function(){let{context:e,currentRepository:t}=(0,l.Pk)();return(0,h.useMemo)(()=>{if(Array.isArray(e)){let t=e.find(e=>"pull-request"===e.type);if(t)return t}return t?{type:"repository",...t}:{type:"global"}},[e,t])}(),w=function(e,t,n){let r=(0,h.useMemo)(()=>void 0===e?[]:(e7.L[e]||[]).filter(e=>void 0===t||!("persona"in e)||void 0===e.persona||e.persona===t),[e,t]);return(0,h.useMemo)(()=>{let e=r.filter(e=>void 0===n||e.name.toLowerCase().startsWith(n.toLowerCase()));return 0===e.length&&n&&e.push({type:"custom",context:"global",iconName:"PaperAirplaneIcon",name:n,prompt:n}),e},[r,n])}(b?.type,b&&"persona"in b?b.persona:void 0,g),{selectedIndex:j,selectPrevious:C,selectNext:S}=function(e){let[t,n]=(0,h.useState)(0);return(0,h.useEffect)(()=>{n(t=>Math.min(t,e))},[e]),{selectedIndex:t,selectPrevious:(0,h.useCallback)(()=>{n(t=>void 0===t?e:t>0?t-1:e)},[e]),selectNext:(0,h.useCallback)(()=>{n(t=>void 0===t?0:t<e?t+1:0)},[e])}}(w.length-1),k=(0,h.useMemo)(()=>e.messages.findLast(e=>"assistant"===e.role),[e.messages]),I=(0,h.useCallback)(e=>{if(m(e9.Initial),x(""),i.closeChat(),"escape"===e){let e=t??eg.fv,n=document.getElementById(e),r=window.scrollX,i=window.scrollY;setTimeout(()=>{n?.focus(),window.scrollTo(r,i)},0)}},[i,t]),N=(0,h.useCallback)(e=>{x(e.currentTarget.value),m(e9.Initial)},[]),O=(0,h.useCallback)(async t=>{x(t.name);let n=t.prompt;""!==n.trim()&&(a(),o&&await i.clearThread(o),m(e9.Complete),await i.sendChatMessage({content:n,thread:o,references:e.currentReferences,topic:e.currentRepository,context:e.context,customInstructions:e.customInstructions,intent:t.intent||eA.wh.conversation,modeOverride:"custom"===t.type?"assistive":"task-oriented-assistive"}),setTimeout(()=>{f?.current?.select?.(),window.scrollTo(scrollX,scrollY)},0))},[i,a,e.context,e.currentReferences,e.currentRepository,e.customInstructions,o]),A=(0,h.useCallback)(async()=>{let e=w[j];e&&await O(e)},[j,w,O]),R=(0,h.useCallback)(()=>i.stopStreaming(),[i]),D=(0,h.useCallback)(()=>{o?u(`${d.Jz}/c/${o.id}`):r?u(`${d.Jz}/r/${r.ownerLogin}/${r.name}`):u(d.Jz)},[r,u,o]),T=()=>{if(p!==e9.Initial)return;let e=(0,eX.Z)(b?.type?.replaceAll("-"," ")??"Select an action");return g&&(e="Results found"),w.every(e=>"custom"===e.type)&&(e="No results found"),(0,s.jsx)(e4,{headingText:e,commands:w.map((e,t)=>({...e,selected:t===j})),onSelect:async e=>await O(e)})},L=()=>{let t=e.isWaitingOnCopilot;return(0,s.jsx)("div",{className:"d-flex flex-column",children:(0,s.jsx)(eh.tL,{commands:{"copilot-chat:task-oriented-select-previous":C,"copilot-chat:task-oriented-select-next":S,"copilot-chat:send-message":()=>void A(),"github:cancel":()=>void R(),"copilot-chat:continue-in-immersive":D},children:(0,s.jsx)(eh.tL.LimitKeybindingScope,{commandIds:["copilot-chat:send-message","github:cancel"],children:(0,s.jsx)(eM.A,{ref:f,size:"large",leadingVisual:(0,s.jsx)(e6,{context:b}),trailingVisual:(0,s.jsxs)("div",{className:"d-flex flex-row",children:[t&&(0,s.jsx)(eh.N5,{variant:"invisible",icon:v.SquareFillIcon,className:"fgColor-danger",commandId:"github:cancel"}),(0,s.jsx)("div",{className:e5.copilotAvatar,children:(0,s.jsx)(eG.N,{animationType:t?eG.L.Thinking:eG.L.Idle,loopAnimation:!0})})]}),value:g,onChange:N,disabled:t,placeholder:"Search for actions"})})})})},E=()=>{let t="loading"===e.messagesLoading.state,n="loaded"===e.messagesLoading.state,r="error"===e.messagesLoading.state;return(0,s.jsx)(e0.$,{children:(0,s.jsxs)(y.A,{className:e5.chatMessageWrapper,sx:{".message-container":{padding:0,display:"block","> :first-child":{display:"none"},".message-actions":{display:"none"}}},children:[t&&(0,s.jsx)(s.Fragment,{children:"Loading..."}),r&&(0,s.jsx)(s.Fragment,{children:"Error..."}),e.isWaitingOnCopilot&&(e.streamingMessage?(0,s.jsx)(eQ.c,{message:e.streamingMessage,isStreaming:!0,inputRef:f,excludeFeedback:!0},e.streamingMessage.id):(0,s.jsx)(eK.r,{lines:3})),n&&!t&&k&&(0,s.jsx)(eQ.c,{message:k,isStreaming:k.id===e.streamingMessage?.id,inputRef:f,excludeFeedback:!0},k.id)]})})},P=()=>p===e9.Initial?T():p===e9.Complete?E():void 0,M=()=>p===e9.Initial?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"Select an action"}),(0,s.jsxs)("div",{className:"d-flex flex-row",children:[(0,s.jsx)(eo.Q,{className:"fgColor-muted",variant:"invisible",onClick:()=>I("close-button"),trailingVisual:(0,s.jsx)(eZ.U,{keys:"Esc"}),children:"Close"}),(0,s.jsx)(eo.Q,{className:"fgColor-muted",variant:"invisible",onClick:A,trailingVisual:(0,s.jsx)(eh.hh,{commandId:"copilot-chat:send-message"}),children:"Confirm"})]})]}):p===e9.Complete?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eY.$,{message:k,children:(0,s.jsx)(e1.G,{iconSize:"small"})}),(0,s.jsx)(eJ.T,{textToCopy:k.content??"",ariaLabel:"Copy to clipboard"})]})}),(0,s.jsxs)("div",{className:"d-flex flex-row",children:[(0,s.jsx)(eo.Q,{className:"fgColor-muted",variant:"invisible",onClick:()=>I("close-button"),trailingVisual:(0,s.jsx)(eZ.U,{keys:"Esc"}),children:"Close"}),(0,s.jsx)(eo.Q,{className:"fgColor-muted",variant:"invisible",onClick:D,trailingVisual:(0,s.jsx)(eh.hh,{commandId:"copilot-chat:continue-in-immersive"}),children:"Continue in Chat"})]})]}):void 0;if(n)return(0,s.jsx)(e$.l,{className:e5.dialog,initialFocusRef:f,onClose:I,renderHeader:()=>(0,s.jsxs)(e$.l.Header,{className:"d-flex flex-row flex-justify-between flex-items-center px-4 pt-2 mr-n3 box-shadow-none",children:[(0,s.jsx)("div",{className:"fgColor-muted",children:(0,s.jsx)(e2,{topic:e.currentRepository})}),(0,s.jsx)("div",{"data-testid":"copilot-assistive-command-window"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(_.K,{size:"small",variant:"invisible",icon:v.ScreenFullIcon,"aria-label":"Take conversation to immersive",disabled:e.isWaitingOnCopilot,onClick:D}),(0,s.jsx)(e$.l.CloseButton,{onClose:()=>I("close-button")})]})]}),renderBody:()=>(0,s.jsxs)(e$.l.Body,{className:"py-1",children:[L(),P()]}),renderFooter:()=>{if(!e.isWaitingOnCopilot)return(0,s.jsx)(e$.l.Footer,{className:"d-flex flex-row flex-justify-between flex-items-center px-3 py-2 fgColor-muted",children:M()})}})}try{e3.displayName||(e3.displayName="CommandWindow")}catch{}var te=n(63867),tt=n(65481);function tn(){let e=(0,l.Pk)(),t=(0,c.b)(),n=(0,h.useMemo)(()=>to(t.sortThreads(e.threads)),[e.threads,t]),[r,i]=(0,h.useState)(!1),o=(0,h.useRef)(null),a=eR.W.deleteAllConversations;return"loading"===e.threadsLoading.state&&n.length<2?(0,s.jsxs)(y.A,{sx:{p:3,height:"100%",display:"grid",alignItems:"center",alignContent:"center",flexDirection:"column",justifyItems:"center",gap:2},children:[(0,s.jsx)(te.A,{}),"Loading threads\u2026"]}):(0,s.jsx)(s.Fragment,{children:"error"===e.threadsLoading.state?(0,s.jsx)(tr,{threadsLoading:e.threadsLoading}):(0,s.jsxs)(s.Fragment,{children:[n.length>0&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eO.l,{sx:{overflowY:"auto"},children:(0,s.jsxs)(eO.l.Group,{children:[(0,s.jsx)(eO.l.GroupHeading,{as:"h3",children:"All conversations"}),(0,s.jsx)(ti,{threads:n,manager:t}),n.length>1&&a&&(0,s.jsx)(ts,{threads:n,manager:t,shouldDeleteAllThreads:r,setShouldDeleteAllThreads:i,returnFocusRef:o})]})})}),0===n.length&&(0,s.jsxs)(y.A,{sx:{p:3,color:"fg.subtle"},children:[(0,s.jsx)("p",{className:"mb-3",children:"There are no conversations at the moment."}),(0,s.jsx)(eo.Q,{onClick:()=>t.selectThread(null),block:!0,children:"Start a new conversation"})]})]})})}let tr=({threadsLoading:e})=>(0,s.jsx)(y.A,{sx:{p:3},children:(0,s.jsxs)(tt.A,{variant:"warning",children:[(0,s.jsx)(P.A,{icon:v.AlertIcon}),"error"===e.state?e.error:"Something went wrong. Please try again later."]})}),ti=({threads:e,manager:t})=>(0,s.jsx)(s.Fragment,{children:e.map(e=>(0,s.jsxs)(eO.l.Item,{onSelect:()=>t.selectThread(e),className:"mr-0 pr-2",children:[(0,s.jsx)(eO.l.LeadingVisual,{children:(0,s.jsx)(v.CommentIcon,{})}),(0,d.CB)(e),(0,s.jsx)(eO.l.Description,{variant:"inline",className:"flex-shrink-0",children:(0,s.jsx)(j.A,{date:new Date(Date.parse(e.updatedAt)),format:"relative"})}),(0,s.jsx)(eO.l.TrailingAction,{icon:v.TrashIcon,label:`Delete conversation: "${(0,d.CB)(e)}"`,onClick:async()=>t.deleteThreadKeepSelection(e)})]},e.id))}),ts=({threads:e,manager:t,shouldDeleteAllThreads:n,setShouldDeleteAllThreads:r,returnFocusRef:i})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo.Q,{"data-testid":"delete-all-threads-button",sx:{mt:2,ml:3},ref:i,onClick:()=>r(!0),children:"Delete all conversations"}),!0===n&&(0,s.jsx)("div",{"data-testid":"delete-all-threads-dialog",children:(0,s.jsxs)(e$.l,{title:"Delete all conversations",width:"small",onClose:()=>r(!1),returnFocusRef:i,footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>r(!1)},{buttonType:"danger",content:"Delete",onClick:async()=>{await t.deleteAllThreadKeepSelection(e),r(!1)},autoFocus:!0}],children:["You are trying to delete ",e.length," conversations. Are you sure? This can\u2019t be undone."]})})]}),to=e=>e.filter(e=>void 0===e.customCopilotID);try{tn.displayName||(tn.displayName="ThreadListView")}catch{}try{tr.displayName||(tr.displayName="ErrorView")}catch{}try{ti.displayName||(ti.displayName="ListView")}catch{}try{ts.displayName||(ts.displayName="DeleteAll")}catch{}var ta=n(91618);let tl=(0,er.E7)();function tc(e){return(0,s.jsx)(el.RelayEnvironmentProvider,{environment:tl,children:(0,s.jsx)(td,{...e})})}function td(e){let t=(0,h.useRef)(null),n=(0,h.useRef)(null),r=eb.J.selectedThreadID,i=eb.J.getCurrentReferences(r)||[];return(0,s.jsx)(a.LB,{children:(0,s.jsxs)(l.Mj,{topic:e.currentTopic,workerPath:e.findFileWorkerPath,threadId:r,refs:i,mode:"assistive",ssoOrganizations:e.ssoOrganizations,chatIsOpen:!1,chatIsVisible:e.chatIsVisible,chatVisibleSettingPath:e.chatVisibleSettingPath,realIp:e.realIp,copilotChatPayload:e,children:[(0,s.jsx)(th,{renderPopover:e.renderPopover||!1,ref:t,reactPartialAnchor:e.reactPartialAnchor,inputRef:n}),(0,s.jsx)(ej.cB,{}),(0,s.jsx)(tf,{inputRef:n})]})})}let tu=({notice:e})=>`/settings/dismiss-notice/${e}`,th=h.forwardRef((e,t)=>{let n=(0,c.b)(),r=(0,l.Pk)(),i=n.getSelectedThread(r),{currentTopic:o,currentView:u}=r,{screenSize:p}=(0,a.lm)(),{licenseType:m}=(0,eq.x)();(0,h.useEffect)(()=>(0,ta.HS)(e=>void n.handleOpenPanelEvent(i,e,r.chatIsOpen,o)),[o,i,n,r.chatIsOpen]),(0,h.useEffect)(()=>(0,ta.f7)(e=>{n.handleAddReferenceEvent(e)}),[i,n,r.currentReferences]),(0,h.useEffect)(()=>(0,ta.Tv)(e=>{n.handleSymbolChangedEvent(e)})),(0,h.useEffect)(()=>(0,ta.fD)(e=>{n.handleSearchCopilotEvent(e)}),[n]),(0,h.useEffect)(()=>{let e=new URL(window.location.href,window.location.origin),t=e.searchParams,i=r.selectedThreadID;if("1"===t.get("copilot")&&i){let t=r.threads.get(i)??null;n.openChat(t,u,"immersive",r.chatVisibleSettingPath),e.searchParams.delete("copilot"),(0,et.kd)(e.toString())}},[n,r.selectedThreadID,r.threads,u,r.chatVisibleSettingPath]),(0,h.useEffect)(()=>{r.chatIsVisible&&!eb.J.getCollapsedState()&&p>a.Gy.large&&n.openChat(i,r.currentView,"page load",r.chatVisibleSettingPath)},[]);let f=(0,h.useCallback)(async()=>{if(r.chatIsOpen)e.inputRef.current&&e.inputRef.current.focus();else{if(m===eA.mF.Unlicensed){if(r.chatVisibleSettingPath){let e=new FormData;e.set("copilot_chat_visible","true"),await (0,ei.DI)(r.chatVisibleSettingPath,{method:"PUT",body:e}),eb.J.setCollapsedState(!1)}window.location.replace(`${window.location.origin}/github-copilot/signup?return_to=${window.location.pathname}`);return}n.openChat(i,u,"header",r.chatVisibleSettingPath,(0,d.Z6)(o)?(0,d.qS)(o):void 0)}},[o,u,m,n,e.inputRef,i,r.chatIsOpen,r.chatVisibleSettingPath]);return e.reactPartialAnchor?(0,s.jsxs)(y.A,{sx:{position:"relative"},children:[(0,s.jsx)(tp,{reactPartialAnchor:e.reactPartialAnchor,onClick:f}),e.renderPopover?(0,s.jsx)(tm,{renderPopover:!0}):(0,s.jsx)(s.Fragment,{})]}):(0,s.jsxs)(y.A,{sx:{position:"relative"},className:"AppHeader-CopilotChatButton",children:[(0,s.jsx)(ea.A,{"aria-label":"Chat with Copilot",direction:"s",children:(0,s.jsx)("div",{children:(0,s.jsx)(_.K,{unsafeDisableTooltip:!0,ref:t,id:eg.fv,icon:v.CopilotIcon,"aria-label":"Chat with Copilot","aria-controls":eg.wJ,onClick:f,className:"AppHeader-button",sx:{backgroundColor:"transparent",borderColor:"border.default",color:"fg.muted",mb:1,"&:hover":{backgroundColor:"var(--control-transparent-bgColor-hover, var(--color-action-list-item-default-hover-bg))"}},"data-testid":"copilot-chat-button","data-hotkey":"Shift+C","aria-expanded":!1})})}),(0,s.jsx)(tm,{renderPopover:e.renderPopover})]})});function tp({reactPartialAnchor:e,onClick:t}){let n=(0,h.useCallback)(e=>{eR.W.headerButtonToImmersive||(e.preventDefault(),t())},[t]);return(0,en.QJ)(e,n),(0,s.jsx)(s.Fragment,{})}function tm({renderPopover:e}){let[t,n]=(0,h.useState)(e),r=(0,h.useCallback)(async()=>{n(!1),await (0,ei.DI)(tu({notice:"copilot_chat_new_user_popover"}),{method:"POST"})},[n]);return(0,s.jsx)(es.A,{open:t,caret:"top-right",sx:{right:"-4px"},children:(0,s.jsxs)(es.A.Content,{sx:{marginTop:2},"data-testid":"copilot-chat-cta-popover",children:[(0,s.jsxs)("p",{children:["You now have access to"," ",(0,s.jsx)("a",{href:"https://docs.github.com/enterprise-cloud@latest/copilot/github-copilot-enterprise/overview/about-github-copilot-enterprise",target:"_blank",rel:"noopener noreferrer",children:"Copilot Enterprise"}),". ","Use the Copilot icon to get started."]}),(0,s.jsx)(eo.Q,{"data-testid":"dismiss-copilot-chat-cta-popover",onClick:r,children:"Got it!"})]})})}function tf({inputRef:e}){let t=(0,l.Pk)(),n=(0,c.b)(),r=(0,h.useRef)(null),[i,o]=(0,h.useState)(eA.hs.None),[a,d]=(0,h.useState)(!1),u=(0,h.useRef)(t.messages.length),p=(0,h.useRef)(t.messagesLoading.state),{panelWidth:m,panelHeight:f,startResize:g,onResizerKeyDown:x}=(0,ex.Tz)();return((0,h.useEffect)(()=>{t.messages.length>u.current&&!t.chatIsOpen&&"loaded"===p.current&&d(!0),u.current=t.messages.length,p.current=t.messagesLoading.state},[t.chatIsOpen,t.messages.length,t.messagesLoading.state]),(0,h.useEffect)(()=>{t.chatIsOpen&&a&&d(!1)},[a,t.chatIsOpen]),"copilot-task-oriented-assistive"===t.entryPointId&&eR.W.taskOrientedAssistive)?(0,s.jsx)(e3,{}):(0,s.jsxs)(eC,{staffDialogRef:r,handleClose:e=>{o(eA.hs.None),n.closeChat();let r=t.entryPointId??eg.fv;if(e&&r){let e=document.getElementById(r),t=window.scrollX,n=window.scrollY;setTimeout(()=>{e?.focus(),window.scrollTo(t,n)},0)}},showStaffDialog:i,panelWidth:m,panelHeight:f,startResize:g,onResizerKeyDown:x,initialFocusRef:e,children:[(0,s.jsx)(ez,{staffDialogRef:r,showStaffDialog:i,setShowStaffDialog:o,isResponding:t.messages.length<=1&&(!!t.streamingMessage||t.isWaitingOnCopilot),hasUnreadMessages:a,startResize:g}),t.chatIsOpen&&(0,s.jsx)(y.A,{sx:{display:"flex",flexGrow:1,overflowY:"auto"},children:(0,s.jsx)(y.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,maxWidth:"100%"},children:"thread"===t.currentView?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ec.r,{inputRef:e},t.selectedThreadID),(0,s.jsx)(ee,{})]}):(0,s.jsx)(tn,{})})})]})}th.displayName="CopilotHeaderButton",tf.displayName="ChatPanelWithHeader";try{tc.displayName||(tc.displayName="CopilotChat")}catch{}try{td.displayName||(td.displayName="CopilotChatNoRelay")}catch{}try{tp.displayName||(tp.displayName="ExternalAnchorListener")}catch{}try{tm.displayName||(tm.displayName="WelcomePopover")}catch{}(0,i.k)("copilot-chat",{Component:tc})},91618:(e,t,n)=>{n.d(t,{HS:()=>s,Oc:()=>i,Tv:()=>l,Xr:()=>SymbolChangedEvent,f7:()=>o,fD:()=>a,qR:()=>r});let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),this.payload=e}};let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),this.context=e}};function r(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function i(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function s(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function o(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function a(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function l(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},76797:(e,t,n)=>{n.d(t,{D:()=>r});function r(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e);let t=document.body;if(!t)return Promise.reject(Error());let n=function(e){let t=document.createElement("pre");return t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="5px",t.textContent=e,t}(e);return t.appendChild(n),!function(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e.textContent||"");let t=getSelection();if(null==t)return Promise.reject(Error());t.removeAllRanges();let n=document.createRange();n.selectNodeContents(e),t.addRange(n),document.execCommand("copy"),t.removeAllRanges(),Promise.resolve()}(n),t.removeChild(n),Promise.resolve()}},46988:(e,t,n)=>{let r;n.d(t,{BI:()=>m,Ti:()=>f,lA:()=>h,sX:()=>p});var i=n(70837),s=n(18679),o=n(80688),a=n(57516);let{getItem:l}=(0,o.A)("localStorage"),c="dimension_",d=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,i.O)("octolytics");delete e.baseContext,r=new s.s(e)}catch{}function u(e){let t=(0,i.O)("octolytics").baseContext||{};if(t)for(let[e,n]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=n,delete t[e]);let n=document.querySelector("meta[name=visitor-payload]");for(let[e,r]of(n&&Object.assign(t,JSON.parse(atob(n.content))),new URLSearchParams(window.location.search)))d.includes(e.toLowerCase())&&(t[e]=r);return t.staff=(0,a.X)().toString(),Object.assign(t,e)}function h(e){r?.sendPageView(u(e))}function p(){return document.head?.querySelector('meta[name="current-catalog-service"]')?.content}function m(e,t={}){let n=p(),i=n?{service:n}:{};for(let[e,n]of Object.entries(t))null!=n&&(i[e]=`${n}`);r&&(u(i),r.sendEvent(e||"unknown",u(i)))}function f(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},56366:(e,t,n)=>{n.d(t,{Av:()=>a,BM:()=>i,Gr:()=>l,HX:()=>u,M_:()=>h,RD:()=>d,rb:()=>s});var r=n(47584);let i="GraphQLTraces",s="GraphQLTracingRefresh",o=decodeURIComponent(new URLSearchParams(r.fV.search).get("disable_clusters")||"").split(",").filter(e=>""!==e);function a(e){if(!r.cg||!l()||!e)return;let t=r.cg;t&&!t[i]&&(t[i]=[]),t&&e.__trace&&(t[i].push(e.__trace),"function"==typeof t[s]&&t[s]())}function l(){let e=r.cg;return"true"===new URLSearchParams(r.fV.search).get("_tracing")||e&&void 0!==e[i]}function c(){return o.length>0}function d(e){if(!l()&&!c())return e;let t=new URL(e,r.fV.origin);return l()&&t.searchParams.set("_tracing","true"),c()&&t.searchParams.set("disable_clusters",o.join(",")),t.pathname+t.search}function u(e){return o.indexOf(e)>-1}function h(e){let t=o.indexOf(e);t>-1?o.splice(t,1):o.push(e);let n=new URLSearchParams(r.fV.search);n.set("disable_clusters",o.join(",")),r.fV.search=n.toString()}},1090:(e,t,n)=>{n.d(t,{A:()=>r});let r=(e,t)=>{let n=new URL(e,window.location.origin),r=new URL(t,window.location.origin);return r.href.includes("#")&&n.host===r.host&&n.pathname===r.pathname&&n.search===r.search}},2976:(e,t,n)=>{n.d(t,{D7:()=>i,MQ:()=>r,gE:()=>s});let r=e=>{if(e){if(e.startsWith("refs/tags/"))return"tag";if(e.startsWith("refs/heads/"))return"branch"}},i=(e,t)=>"branch"===t?`refs/heads/${e}`:"tag"===t?`refs/tags/${e}`:e,s=e=>{if(!e)return;if(!r(e))return e;let[,,...t]=e.split("/");return t.join("/")}},79317:(e,t,n)=>{n.d(t,{VB:()=>SSRNetwork,SD:()=>I,E7:()=>k});var r=n(40961),i=n(69487),s=n(56366),o=n(57572),a=n(47584),l=n(42445);let c=["SAML","SERVICE_UNAVAILABLE"],d={FORBIDDEN:["SAML error"],AUTHENTICATION:["Couldn\u2019t authenticate you"]},u={NOT_FOUND:["repository","discussion"]};var h=n(75632);let p=class ValidationError extends Error{constructor(e,t,n){super(e,t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"catalogService",void 0),this.catalogService=n,this.name="ValidationError"}};async function m(e,t,n){if(e.status>401&&404!==e.status){let r=await e.text(),i={url:e.url,timestamp:new Date().toISOString(),persistedQueryId:t,persistedQueryName:n,failureRequestId:e.headers.get("X-Github-Request-Id")};throw Error(`HTTP error (${e.status}): ${r||"No additional text"}.
    Error Info: ${JSON.stringify(i)}`,{cause:e.status})}}async function f(e,t,n,r="GET",i,s,o,a){return(await g(e,t,n,r,{isSubscription:!1,scope:void 0},i,s,o,a)).response}async function g(e,t,n,r="POST",o={},m,f,b,v){let w=JSON.stringify((0,i.stableCopy)({query:e,variables:n,...o.scopeObject?{scopeObject:o.scopeObject}:{}})),{isSubscription:y,scope:j,subscriptionTopic:C,dispatchTime:S}=o,_=(0,h.G7)("nonreporting_relay_graphql_status_codes"),k=function(e,t,n,r,i,s,o="/_graphql"){let l=[];if("GET"===e&&l.push(`body=${t}`),n&&l.push("subscription=1"),i&&l.push(`scope=${encodeURIComponent(i)}`),r&&l.push(`subscriptionTopic=${encodeURIComponent(r)}`),s&&l.push(`dispatchTime=${encodeURIComponent(s)}`),a.cg){let e=new URL(a.cg.location.href,a.cg.location.origin).searchParams.get("_features");e&&l.push(`_features=${e}`)}return l.length>0?`${o}?${l.join("&")}`:o}(r,encodeURIComponent(w),y,C,j,S,m),I=null;try{let{subscriptionId:n,requestId:i,json:o,status:a}=await x(k,r,e,t,w,f);if(I=n,b&&o.errors){let e=b[a];if(e)for(let n of o.errors){let r=e[n.type];r?.({persistedQueryName:t,errorMessage:n.message})}}let h=function(e,t,n,r){if("errors"in e&&(e.errors.filter(e=>c.includes(e.type)||!!d[e.type]?.includes(e.message)||!(JSON.stringify(u[e.type])!==JSON.stringify(e.path))).map(e=>{console.error(`Failed to fetch data. Please use this request ID when contacting support: ${t} Error: ${e.type}: ${e.message} (path: ${e.path})`)}),e.errors=e.errors.filter(e=>!c.includes(e.type)&&!d[e.type]?.includes(e.message)&&JSON.stringify(u[e.type])!==JSON.stringify(e.path))),"errors"in e&&e.errors.length){let t=e.errors.map(e=>`GraphQL error: ${e.type}: ${e.message} (path: ${e.path})`).join(", "),i=new p(`${t} (Persisted query id: ${n})`,{cause:e.errors},e.extensions?.query_owning_catalog_service);if(r)(0,l.N7)(i),r.error(i);else throw i}if(!("data"in e)){let i=Error(`Expected data property in response: ${JSON.stringify(e)}. persistedQueryId: ${n}, requestId: ${t}`);if(r)(0,l.N7)(i),r.error(i);else throw i}return e}(o,i,e,v);return h&&(0,s.Av)(h),{subscriptionId:I,response:h}}catch(e){if(v)return _&&429===e.cause||(0,l.N7)(e),v.error(e),{subscriptionId:I,response:{errors:[{message:"An error occurred while fetching data. Please try again later."}],extensions:{}}};throw e}}async function x(e,t,n,r,i,o){return b((0,s.RD)(e),t,n,r,i,o)}async function b(e,t,n,r,i,s){let a;let l={};s?.issues_react_perf_test&&(l["X-LUC-Environment"]="issues"),l["X-Requested-With"]="XMLHttpRequest",a="GET"===t?await fetch(e,{method:t,cache:"no-cache",credentials:"include",headers:l}):await (0,o.DI)(e,{method:t,headers:{Accept:"application/json",...l},...i?{body:i}:void 0}),await m(a,n,r);let c=await a.json();return{subscriptionId:a.headers.get("X-Subscription-ID"),requestId:a.headers.get("X-Github-Request-Id")||"",json:c,status:a.status}}let v=[{kind:"linked",handle(e,t,n){if(null!=t&&t.getType()===i.ROOT_TYPE&&"node"===e.name&&n.hasOwnProperty("id"))return n.id}},{kind:"pluralLinked",handle(e,t,n){if(null!=t&&t.getType()===i.ROOT_TYPE&&"nodes"===e.name&&n.hasOwnProperty("ids"))return n.ids}}];var w=n(15930),y=n(88853),j=n(69982);function C(e){return(0,j.unstable_scheduleCallback)(j.unstable_LowPriority,e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let _={cancel:()=>!1,schedule:e=>((0,r.unstable_batchedUpdates)(e),"")};let SSRNetwork=class SSRNetwork{execute(e,t,n){return this.relayNetwork.execute(e,t,n)}getPreloadedSubscriptions(){return this.preloadedSubscriptions}constructor(e,t={},n,r,s,o){S(this,"relayNetwork",void 0),S(this,"ssrPreloadedData",void 0),S(this,"preloadedSubscriptions",void 0),S(this,"warningsShown",void 0),S(this,"enabled_features",void 0),S(this,"maxAge",void 0),S(this,"errorCallbacks",void 0),this.ssrPreloadedData=e,this.enabled_features=t,this.preloadedSubscriptions=n,this.warningsShown=new Set,this.maxAge=s,this.errorCallbacks=o,this.relayNetwork=i.Network.create((e,t)=>i.Observable.create(n=>{let i=function({params:e,variables:t,ssrPreloadedQueries:n,baseUrl:r,emitWarning:i,enabledFeatures:s,maxAge:o,errorCallbacks:l,observer:c}){if(!e.id)throw Error("params has no id property!");if(e.id&&n){let r=JSON.stringify(t),i=n.get(e.id)?.get(r),s=Math.floor(Date.now()/1e3),l=i?.timestamp;if(i&&(c.next(i),!(o&&l&&s>l+o))){c.complete();return}e.metadata?.isRelayRouteRequest&&(0,a.g5)()}let d="mutation"===e.operationKind?"POST":"GET";if(a.KJ)return f(e.id,e.name,t,d,r,s,l,c)}({params:e,variables:t,ssrPreloadedQueries:this.ssrPreloadedData,baseUrl:r,emitWarning:e=>{this.warningsShown.has(e)||(this.warningsShown.add(e),console.warn(e))},enabledFeatures:this.enabled_features,maxAge:s,errorCallbacks:this.errorCallbacks,observer:n});i instanceof Promise&&i.then(e=>{if(!Array.isArray(e)&&"extensions"in e&&e.extensions&&e.extensions.subscriptions){let t=e.extensions.subscriptions;for(let e in t)for(let n in this.preloadedSubscriptions.has(e)||this.preloadedSubscriptions.set(e,new Map),t[e])this.preloadedSubscriptions.get(e)?.set(n,t[e][n])}n.next(e),n.complete()})}),(e,t)=>(function(e,t,n=new Map){let r=e.id,s=e.name;return i.Observable.create(i=>{let o=()=>{},a=!1;return async function(){if(!r)throw Error("unexpected operation with no id!");let c=e.metadata?.scope,d=function(e,t,n,r){let i=r.get(e);if(i)e:for(let[e,r]of i){for(let[r,i]of Object.entries(JSON.parse(e)))if("$scope"===r&&n!==i||t[r]!==i)continue e;return r}}(r,t,c,n),u=null;if(d)u=d.subscriptionId,d.response&&i.next(d.response);else try{let e=await g(r,s,t,"GET",{isSubscription:!0,scope:c});u=e.subscriptionId,e.response&&i.next(e.response)}catch(e){if(e instanceof Error&&e.message.includes("Subscription halted"))return;throw e}try{let e=await (0,w.H)();if(a)return;let n=(0,y.$)(e,u,async({scope_object:e,subscription_topic:n,dispatch_time:o})=>{try{let{response:a}=await g(r,s,{...t},"GET",{isSubscription:!0,scopeObject:e,subscriptionTopic:n,dispatchTime:o,scope:c});a&&i.next(a)}catch(e){(0,l.N7)(e,{message:`Error in fetching update for ${r} with variables ${JSON.stringify(t)}`})}});n?.unsubscribe&&(o=n.unsubscribe)}catch(e){i.error(e)}}(),{get closed(){return a},unsubscribe(){a=!0,o()}}})})(e,t,this.preloadedSubscriptions))}};let k=(e,t)=>{let n=new SSRNetwork(new Map,{},new Map,e,void 0,t),r=new i.Environment({scheduler:_,store:new i.Store(new i.RecordSource,{gcReleaseBufferSize:50,queryCacheExpirationTime:3e5,gcScheduler:C}),getDataID:(e,t)=>{if("Viewer"===t)return null==e.id?(0,i.generateClientID)("client:root","viewer"):e.id;if("ProjectV2SingleSelectFieldOption"===t){let t=[];return e.id&&t.push(e.id),e.name&&t.push(e.name),e.color&&t.push(e.color),e.description&&t.push(function(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}(e.description)),t.join("_")}return e.id},network:n,missingFieldHandlers:v});return r.options={baseUrl:e,getPreloadedSubscriptions:()=>n.getPreloadedSubscriptions()},r};function I({environment:e,query:t,variables:n={}}){let r=(0,i.getRequest)(t),s=(0,i.createOperationDescriptor)(r,n);return e.retain(s),(0,i.fetchQuery)(e,t,n,{fetchPolicy:"store-or-network"})}},53949:(e,t,n)=>{n.d(t,{G:()=>r});let r=e=>({})},94232:(e,t,n)=>{n.d(t,{I:()=>o});var r=n(96540),i=n(38568),s=n(18347);function o(e,t,n=[]){let a=(0,r.useCallback)(e,n),l=(0,s.BP)(),c=(0,r.useRef)(l===s.O8.ClientRender),[d,u]=(0,r.useState)(()=>l===s.O8.ClientRender?a():t),h=(0,r.useCallback)(()=>{u(a)},[a]);return(0,i.N)(()=>{c.current||u(a),c.current=!1},[a,...n]),[d,h]}},88782:(e,t,n)=>{n.d(t,{u:()=>o});var r=n(5796),i=n(57572),s=n(96540);function o(e,t,n,o){let[a,l]=(0,s.useState)({loading:!0}),c=t&&e&&n&&o?(0,r.IO9)({repo:{name:t,ownerLogin:e},commitish:n,action:"file-contributors",path:o}):null;return(0,s.useEffect)(()=>{if(!c)return;let e=!1;return(async()=>{l({loading:!0});let t=await (0,i.lS)(c);if(!e)try{t.ok?l({contributors:await t.json()}):l({error:!0})}catch{l({error:!0})}})(),function(){e=!0}},[c]),a}},55516:(e,t,n)=>{n.d(t,{d:()=>o});var r=n(44492),i=n(23125),s=n(96540);let o=(e,t,{leading:n=!1,maxWait:o,trailing:a=!0,onChangeBehavior:l="flush"}={})=>{let c=(0,r.M)(e),d=(0,s.useMemo)(()=>{let e=void 0===o?{leading:n,trailing:a}:{leading:n,trailing:a,maxWait:o};return(0,i.A)((...e)=>c.current(...e),t,e)},[c,t,n,o,a]);return(0,s.useEffect)(()=>()=>{d?.[l]()},[d,l]),d}},90524:(e,t,n)=>{n.d(t,{E:()=>h,q:()=>u});var r=n(5225),i=n(5796),s=n(18056),o=n(57572),a=n(96540);async function l(e){let t=await (0,o.lS)(e);return t.ok?await t.json():void 0}let c=new Map,d=(0,r.A)(l,{cache:c});function u(){c.clear()}function h(e,t,n,r){let[o,l]=(0,a.useState)(),[c,h]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!0),f=t&&e&&n&&r?(0,i.IO9)({repo:{name:t,ownerLogin:e},commitish:n,action:"latest-commit",path:r}):null;return(0,a.useEffect)(()=>{let e=new AbortController;return document.addEventListener(s.z.START,u,{signal:e.signal}),()=>{e.abort()}},[]),(0,a.useEffect)(()=>{let e=!1;return(async()=>{if(!f)return;h(!1),m(!0),l(void 0);let t=await d(f);if(!e){try{t?l(t):h(!0)}catch{h(!0)}m(!1)}})(),function(){e=!0}},[f,n]),[o,p,c]}},46928:(e,t,n)=>{n.d(t,{Z:()=>u,o:()=>h});var r=n(96540),i=n(47767),s=n(45588),o=n(84976),a=n(1090),l=n(73081),c=n(58135),d=n(76801);let u=()=>{let{routes:e}=r.useContext(d.k),t=(0,i.Zp)();return r.useCallback((i,o={})=>{let d=(0,s.o1)(i).pathname;if(!(0,s.ue)(e,d)||o.reloadDocument){let e="string"==typeof i?i:(0,s.AO)(i);(async()=>{let{softNavigate:t}=await Promise.all([n.e("vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js"),n.e("ui_packages_soft-navigate_soft-navigate_ts")]).then(n.bind(n,61828));t(e)})()}else{(0,a.A)(location.href,i.toString())||(0,l.SC)("react");let{preventAutofocus:e,...n}=o;(0,r.startTransition)(()=>{t(i,e?{...n,state:{[c.V]:!0,...n.state}}:n)})}},[t,e])},h=()=>{let[e]=(0,o.ok)(),t=u(),{pathname:n}=(0,i.zy)(),s=r.useCallback((r,i={})=>{t({pathname:n,search:(0,o.PI)("function"==typeof r?r(e):r).toString()},i)},[e,t,n]);return[e,s]}},80758:(e,t,n)=>{n.d(t,{H:()=>o});var r=n(96540);let i=(e,t,n)=>{let r=t[1]-t[0];return e<t[0]?e:e<t[1]?t[0]+n:e+(n-r)},s=(e,t)=>({...e,nativeEvent:e,target:t,currentTarget:t,preventDefault:()=>e.preventDefault(),isDefaultPrevented:()=>e.defaultPrevented,isPropagationStopped:()=>!1,persist:()=>({})}),o=({inputRef:e,fallbackEventHandler:t})=>(0,r.useCallback)((n,r,o)=>{let a=e.current;if(!a)return;let l=document.activeElement;a.focus();let c=r??[a.selectionStart??a.value.length,a.selectionEnd??a.value.length],d=void 0===o?i(a.selectionStart??a.value.length,c,n.length):Array.isArray(o)?o[0]:o,u=Array.isArray(o)?o[1]:d,h=!1;try{if(document.activeElement!==a)throw Error("Input must be focused to use execCommand");a.setSelectionRange(c[0],c[1]),h=""===n?document.execCommand("delete",!1):document.execCommand("insertText",!1,n),a.setSelectionRange(d,u)}catch{h=!1}if((l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement)&&l.focus(),!h){let r=a.value.slice(0,c[0])+n+a.value.slice(c[1]),i=new InputEvent("input",{bubbles:!1});e.current.value=r,e.current.setSelectionRange(d,u),e.current.dispatchEvent(i),t(s(i,e.current))}},[e,t])},14987:(e,t,n)=>{n.d(t,{l:()=>u});var r=n(74848),i=n(51349),s=n(57572),o=n(96540),a=n(2622),l=n(54912);let c=(0,r.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),d=[{name:"Hate it",value:1,icon:c,color:"veryDissatisfied"},{name:"Not great",value:2,icon:(0,r.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),color:"satisfied"},{name:"Love it",value:4,icon:(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]}),color:"verySatisfied"}],u=(0,o.forwardRef)(function({mode:e,returnFocusRef:t},n){let c=(0,o.useRef)(null),u=(0,o.useRef)(null),h=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(n,()=>({openDialog:e=>{h.current=e,a.W.copilotChatInterviewSurvey?c.current?.openDialog():u.current?.openDialog(e)}}));let p=async(t,n)=>{let r=[];if(null==t&&r.push("Please select a rating."),n.length>2e3&&r.push("Please keep your feedback within 2000 characters or less."),r.length>0)return r;let i={rating:t,content:n,hostname:window.location.hostname,path:window.location.pathname,mode:e};try{(await (0,s.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||r.push("An error occurred while submitting your feedback.")}catch{r.push("An error occurred while submitting your feedback.")}return r};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.E,{ref:c,onClose:e=>{"no-thanks"===e&&u.current?.openDialog(h.current)}}),(0,r.jsx)(i.N,{ref:u,options:d,onSubmit:p,returnFocusRef:t})]})});u.displayName="ConversationFeedbackDialog"},25408:(e,t,n)=>{n.d(t,{Y:()=>k});var r,i=n(74848),s=n(70170),o=n(46988),a=n(53949),l=n(11499),c=n(38568),d=n(57572),u=n(16255),h=n(73451),p=n(19647),m=n(55847),f=n(74144),g=n(96540),x=n(40961),b=n(65615),v=n(7426);let w={footerContainer:"PersonalInstructionsDialog-module__footerContainer--YsPvr"};var y=n(38621),j=n(8338);let C={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},S=(0,g.forwardRef)(function(e,t){let{onSelect:n}=e,[r,s]=(0,g.useState)(!1);return(0,i.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:{marginBottom:"1px"},children:[(0,i.jsx)(j.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:r&&Object.entries(C)?.map(([e,t])=>i.jsxs(j.l.Item,{"aria-label":`${t.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>n(e,t.body),children:[i.jsx(y.PlusIcon,{}),e]},e))}),(0,i.jsx)(j.l,{className:"d-flex flex-column flex-justify-end",children:(0,i.jsx)(j.l.Item,{"aria-label":r?"Hide templates":"Show templates","data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:{border:"1px solid transparent"},onSelect:()=>s(!r),children:r?(0,i.jsx)(y.XIcon,{}):(0,i.jsx)(y.LightBulbIcon,{})})})]})});try{S.displayName||(S.displayName="PersonalInstructionsTemplates")}catch{}try{(r=PersonalInstructionsTemplatesWithRef).displayName||(r.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let _=(e,t=500)=>{let[n,r]=(0,g.useState)(48);return(0,g.useEffect)(()=>{let n=(0,s.s)(()=>{e?.current&&r(e.current.clientHeight??48)},t),i=new ResizeObserver(n);return e?.current&&i.observe(e.current),()=>{n.cancel(),i?.disconnect?.()}},[e,t]),n},k=({onDismiss:e,returnFocusRef:t})=>{let n=(0,b.Pk)(),r=(0,v.b)(),[s,y]=(0,g.useState)(n.personalInstructions??""),[j,C]=(0,g.useState)(void 0),[k,N]=(0,g.useState)(!1),O=(0,g.useRef)(null),A=(0,g.useRef)(null),[R,D]=(0,g.useState)(""),T=_(A);(0,c.N)(()=>{O?.current&&(O.current.scrollTop=O.current.scrollHeight)},[s]);let L=(0,g.useCallback)(async()=>{if(!k){N(!0),R&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:R});try{let n=await (0,d.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:s}});if(n.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),r.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:s}),(0,x.flushSync)(()=>e()),t.current?.focus();else{let e=await n.json();C(String(e.errorMessage))}}catch{C("An error occurred while saving your personal instructions.")}finally{N(!1)}}},[k,s,r,t,e,R]),E=(e,t)=>{t&&(y(s?`${s}
${t}`:t),D(e),O?.current?.focus())},P=()=>{L()},M=(0,g.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,x.flushSync)(()=>e()),t.current?.focus()},[e,t]);return(0,i.jsx)(u.Z,{children:(0,i.jsx)(f.l,{onClose:M,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",renderBody:()=>(0,i.jsx)(f.l.Body,{children:(0,i.jsx)("form",{onSubmit:L,children:(0,i.jsxs)(h.A,{children:[(0,i.jsx)(h.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,i.jsx)("div",{className:"width-full position-relative",children:(0,i.jsxs)(l.tL,{commands:{"github:submit-form":P},children:[(0,i.jsx)(p.Ay,{ref:O,className:"width-full",style:{paddingBottom:`${T}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:s,validationStatus:j||s.length>600?"error":void 0,...(0,a.G)("prompt-input"),onChange:e=>{y(e.target.value),C(void 0)}}),(0,i.jsx)(S,{ref:A,onSelect:E})]})}),(0,i.jsx)(I,{text:s,promptCharLimit:600}),j&&(0,i.jsx)(h.A.Validation,{variant:"error",children:(0,i.jsx)("span",{...(0,a.G)("error-message"),children:j})})]})})}),renderFooter:()=>(0,i.jsxs)("div",{className:w.footerContainer,children:[(0,i.jsx)(m.Q,{variant:"default",onClick:M,children:"Cancel"}),(0,i.jsx)(m.Q,{loading:k,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:L,children:"Save"})]})})})};function I({text:e,promptCharLimit:t}){let n=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-tabular-nums",...(0,a.G)("current-character-count"),children:e.length})," ","/ ",t," characters"]});return(0,i.jsx)(i.Fragment,{children:e.length>t?(0,i.jsx)(h.A.Validation,{variant:"error",children:n}):(0,i.jsx)(h.A.Caption,{children:n})})}try{k.displayName||(k.displayName="PersonalInstructionsDialog")}catch{}try{I.displayName||(I.displayName="CharacterCount")}catch{}},57393:(e,t,n)=>{n.d(t,{X:()=>b});var r=n(74848),i=n(38621),s=n(16255),o=n(73451),a=n(19647),l=n(9591),c=n(75177),d=n(46309),u=n(81679),h=n(87330),p=n(55847),m=n(74144),f=n(96540),g=n(37937),x=n(7426);let b=({onDismiss:e,promptDialogRef:t})=>{let n=(0,x.b)(),b=g.J.settings,[v,w]=(0,f.useState)(b?.instructionPrompt||void 0),[y,j]=(0,f.useState)(b?.skillOverrides??[]),[C,S]=(0,f.useState)(b?.temperature||.7),_=(0,f.useRef)(void 0),k=(0,f.useCallback)(async()=>{if(_.current){w(_.current);return}let e=await n.getSystemPrompt();_.current=e,w(e)},[n]);(0,f.useEffect)(()=>{(async()=>{void 0===v&&await k()})()},[k,n,v]);let I=(0,f.useCallback)(()=>{k(),j([]),S(.7)},[k]);return(0,r.jsx)(s.Z,{children:(0,r.jsxs)(m.l,{ref:t,onClose:e,title:"Prompt Settings",width:"xlarge",sx:{overflow:"auto"},children:[(0,r.jsxs)(m.l.Body,{children:[(0,r.jsxs)(o.A,{children:[(0,r.jsx)(o.A.Label,{children:"System Instructions"}),(0,r.jsx)(o.A.Caption,{children:(0,r.jsx)("span",{children:"Make adjustments to the system instructions or add new instructions."})}),(0,r.jsx)(a.Ay,{block:!0,sx:{my:2},"aria-label":"Prompt",name:"Prompt",value:v,onChange:e=>w(e.target.value)})]}),(0,r.jsxs)(o.A,{sx:{pt:3},children:[(0,r.jsx)(o.A.Label,{children:"Temperature"}),(0,r.jsx)(o.A.Caption,{children:"Controls the randomness of the model's responses. Lower temperatures are more deterministic, while higher temperatures are more random."}),(0,r.jsx)(l.A,{type:"number",min:"0",max:"1",step:"0.01",block:!0,value:C,onChange:e=>S(Number(e.target.value))})]}),(0,r.jsx)(c.A,{sx:{fontSize:3,py:3},children:"Tools"}),y.map((e,t)=>(0,r.jsxs)(f.Fragment,{children:[(0,r.jsxs)(d.B,{direction:"horizontal",sx:{py:2},children:[(0,r.jsxs)(o.A,{children:[(0,r.jsx)(o.A.Label,{children:"Name"}),(0,r.jsx)(o.A.Caption,{children:(0,r.jsx)("span",{children:"Slug of tool you want to adjust"})}),(0,r.jsx)(l.A,{defaultValue:e.slug,onChange:e=>{y.map((n,r)=>{r===t&&(n.slug=e.target.value)})}})]}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(o.A.Label,{children:"Description"}),(0,r.jsx)(o.A.Caption,{children:(0,r.jsx)("span",{children:"Make changes to the tool description"})}),(0,r.jsx)(l.A,{defaultValue:e.description,onChange:n=>{y.map((r,i)=>{i===t&&(e.description=n.target.value)})}})]}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(o.A.Label,{id:"toggle",children:"Enabled?"}),(0,r.jsx)(u.A,{size:"small","aria-labelledby":"toggle",defaultChecked:e.enabled,onChange:e=>{y.map((n,r)=>{r===t&&(n.enabled=e)})}})]}),(0,r.jsx)(h.K,{icon:i.TrashIcon,"aria-label":"Delete tool",variant:"invisible",sx:{mt:"20px"},onClick:()=>{let e=[...y];1===y.length?j([]):(e.splice(t,1),j(e))}})]}),t===y.length-1&&(0,r.jsx)(p.Q,{leadingVisual:(0,r.jsx)(i.PlusIcon,{}),onClick:()=>j([...y,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add another tool"})]},`tool-${e.slug}-${Math.random()}`)),0===y.length&&(0,r.jsx)(p.Q,{leadingVisual:(0,r.jsx)(i.PlusIcon,{}),onClick:()=>j([...y,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add a tool"})]}),(0,r.jsx)(m.l.Footer,{children:(0,r.jsx)(m.l.Buttons,{buttons:[{type:"button",onClick:e,content:"Cancel"},{type:"button",onClick:I,content:"Reset"},{type:"submit",onClick:()=>{let t=y.filter(e=>e.slug&&e.description);n.setCopilotSettings({instructionPrompt:v||"",skillOverrides:t,temperature:C}),e()},content:"Save",buttonType:"primary"}]})})]})})};try{b.displayName||(b.displayName="PromptDialog")}catch{}},50260:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(74848),i=n(34164);let s={shimmerText:"WithShimmerEffect-module__shimmerText--iLQCi",fadeIn:"WithShimmerEffect-module__fadeIn--bD_iN"},o=({children:e,className:t})=>(0,r.jsx)("div",{className:(0,i.$)(s.fadeIn,t),children:(0,r.jsx)("div",{className:(0,i.$)(s.shimmerText),children:e})});try{o.displayName||(o.displayName="WithShimmerEffect")}catch{}},26514:(e,t,n)=>{n.d(t,{T:()=>p});var r=n(74848),i=n(45996),s=n(38621),o=n(87330),a=n(96540),l=n(34164),c=n(42522),d=n(13080),u=n(76797);let h={tooltip:"CopyToClipboardButton-module__tooltip--Dq1IB"};function p({icon:e=s.CopyIcon,size:t="medium",onCopy:n,textToCopy:p,tooltipProps:m,variant:f="invisible",ariaLabel:g,className:x,disabled:b,...v}){let[w,y]=a.useState(!1),j=(0,i.A)(),C=g??`Copy "${p}" to clipboard`,S=w?"Copied!":C,_={size:t,variant:f,onClick:()=>{y(!0),(0,d.i)("Copied!"),(0,u.D)(p),n?.(),setTimeout(()=>j()&&y(!1),2e3)},icon:w?s.CheckIcon:e,className:(0,l.$)(w?"color-fg-success":void 0,x),...v},k=(0,a.useId)();return b?(0,r.jsx)(o.K,{..._,"aria-label":C,disabled:!0}):(0,r.jsx)(c.m,{text:S,"aria-label":C,type:"label",id:k,"aria-hidden":!0,...m,className:(0,l.$)(h.tooltip,m?.className),children:(0,r.jsx)(o.K,{..._,"aria-labelledby":k})})}try{p.displayName||(p.displayName="CopyToClipboardButton")}catch{}},62064:(e,t,n)=>{n.d(t,{v:()=>u});var r,i=n(74848),s=n(96884),o=n(87330),a=n(94977),l=n(96540);let c=e=>` ${e.split(" ").map(e=>`<${e.replaceAll("Mod",(0,s.U0)()?"Cmd":"Ctrl").replaceAll("Command","Cmd").replaceAll("Control","Ctrl").toLowerCase()}>`).join(" / ")}`,d=e=>e.replaceAll("{CMD_CTRL}",(0,s.U0)()?"Command":"Control"),u=(0,l.forwardRef)(({label:e,hideTooltip:t,icon:n,shortcut:r,sx:s,tooltipDirection:u,...h},p)=>{let m=(0,l.useCallback)(()=>{let s={display:"flex"};return u?.includes("w")&&(s={...s,pl:2,ml:-2}),u?.includes("e")&&(s={...s,pr:2,mr:-2}),u?.includes("s")&&(s={...s,pb:2,mb:-2}),(u?.includes("n")||!u)&&(s={...s,pt:2,mt:-2}),t?(0,i.jsx)(n,{}):(0,i.jsx)(a.A,{"aria-label":`${e}${r?c(r):""}`,className:"icon-button-with-tooltip__tooltip",direction:u,sx:s,children:(0,i.jsx)(n,{})})},[t,e,r,u,n]);return(0,i.jsx)(o.K,{unsafeDisableTooltip:!0,ref:p,icon:m,"aria-keyshortcuts":r?d(r):void 0,sx:{...s,"&:focus-visible, &:hover":{"& .icon-button-with-tooltip__tooltip":{"&::after, &::before":{display:"inline-block",textDecoration:"none",animationName:"tooltip-appear",animationDuration:"0.1s",animationFillMode:"forwards",animationTimingFunction:"ease-in"}}},"&:hover .icon-button-with-tooltip__tooltip":{"&::after, &::before":{animationDelay:"0.4s"}}},...h,"aria-label":e})});u.displayName="IconButtonWithTooltip";try{(r=TooltippedIcon).displayName||(r.displayName="TooltippedIcon")}catch{}},70255:(e,t,n)=>{n.d(t,{a:()=>M});var r=n(74848),i=n(70170);let s=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],o=(e,t)=>{let{height:n,top:r,left:i}=function(e,t){let n="mozInnerScreenX"in window,r=document.createElement("div");r.id="input-textarea-caret-position-mirror-div",document.body.appendChild(r);let i=r.style,o=window.getComputedStyle(e),a=isNaN(parseInt(o.lineHeight))?1.2*parseInt(o.fontSize):parseInt(o.lineHeight),l=e instanceof HTMLInputElement;for(let t of(i.whiteSpace=l?"nowrap":"pre-wrap",i.wordWrap=l?"":"break-word",i.position="absolute",s))if(l&&"lineHeight"===t){if("border-box"===o.boxSizing){let e=parseInt(o.height),t=parseInt(o.paddingTop)+parseInt(o.paddingBottom)+parseInt(o.borderTopWidth)+parseInt(o.borderBottomWidth),n=t+a;e>n?i.lineHeight=`${e-t}px`:e===n?i.lineHeight=o.lineHeight:i.lineHeight="0"}else i.lineHeight=o.height}else if(l||"width"!==t||"border-box"!==o.boxSizing)i[t]=o[t];else{let t=parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth),r=n?parseFloat(o.width)-t:e.clientWidth+t;i.width=`${r}px`}n?e.scrollHeight>parseInt(o.height)&&(i.overflowY="scroll"):i.overflow="hidden",r.textContent=e.value.substring(0,t),l&&(r.textContent=r.textContent.replace(/\s/g,"\xa0"));let c=document.createElement("span");c.textContent=l?".":e.value.substring(t)||".",r.appendChild(c);let d={top:c.offsetTop+parseInt(o.borderTopWidth),left:c.offsetLeft+parseInt(o.borderLeftWidth),height:a};return document.body.removeChild(r),d}(e,t);return{height:n,top:r-e.scrollTop,left:i-e.scrollLeft}},a=(e,t)=>{let{top:n,left:r,height:i}=o(e,t),{top:s,left:a}=e.getBoundingClientRect();return{height:i,top:s+n,left:a+r}};var l=n(47584),c=n(11499),d=n(80758),u=n(74021),h=n(64515),p=n(16255),m=n(34164),f=n(96540),g=n(35908),x=n(38568);let b=({isOpen:e,listElement:t,inputElement:n,onCommit:r,options:i,tabInsertsSuggestions:s=!1,firstOptionSelectionMode:o="none"})=>{let a=(0,f.useId)(),l=`combobox-${a}__option`,c=(0,f.useRef)(e),[d,u]=(0,f.useState)(null),h=(0,f.useCallback)(()=>[...t?.querySelectorAll("[role=option]")??[]],[t]),p=(0,f.useCallback)(e=>{let t=e.target.getAttribute("data-combobox-list-index"),n=i[null!==t?parseInt(t,10):NaN];n&&r({nativeEvent:e,option:n})},[i,r]),m=(0,f.useCallback)(e=>e.preventDefault(),[]);(0,f.useEffect)(function(){if(n&&t){t.getAttribute("role")||t.setAttribute("role","listbox");let e=new g.A(n,t,{tabInsertsSuggestions:s,firstOptionSelectionMode:o});return u(e),()=>{e.destroy(),u(null)}}},[n,t,s,o]),(0,f.useEffect)(function(){let t=c.current;c.current=e&&null!==d,e!==t&&d&&(e?d.start():d.stop())},[e,d]),(0,f.useEffect)(function(){return t?.addEventListener("combobox-commit",p),()=>t?.removeEventListener("combobox-commit",p)},[p,t]),(0,x.N)(()=>{let e=h();for(let[t,n]of e.entries())(!n.id||n.id.startsWith(l))&&(n.id=`${l}-${t}`),n.setAttribute("data-combobox-list-index",t.toString()),n.addEventListener("mousedown",m);return d?.resetSelection(),()=>{for(let t of e)t.removeEventListener("mousedown",m)}},[h,l,i,d,m])};var v=n(63867),w=n(8338),y=n(45221),j=n(12304);let C={Box_0:"AutocompleteSuggestions-module__Box_0--iBnIs",Overlay_0:"AutocompleteSuggestions-module__Overlay_0--QuLJW",ActionListItem:"AutocompleteSuggestions-module__ActionListItem--jPkc1"},S=new Set([" ","\n"]),_=new Set([".","\n"]),k=(e,t,n)=>{let r=e.sort((e,t)=>t.triggerChar.length-e.triggerChar.length);for(let e=n-1,i="",s=r;e>=0&&s.length>0;e--){let n=t[e]??"";for(let r of(i=n+i,S.has(n)&&(s=s.filter(e=>e.multiWord)),_.has(n)&&(s=s.filter(e=>!e.multiWord)),s.filter(e=>i.startsWith(e.triggerChar)))){let n=t[e-1]??"",o=i[1]??"";if((!n||/[\s([]/.test(n))&&(!o||!/\s/.test(o)))return{trigger:r,query:i.slice(r.triggerChar.length)};s=s.filter(e=>e!==r)}}return null},I=e=>"object"==typeof e&&null===e.value,N=e=>"string"==typeof e?e:e.value,O=e=>"string"==typeof e?e:null===e.value?e.key:e.key??e.value,A=(...e)=>t=>{for(let n of[...e].reverse())t.isDefaultPrevented()||n?.(t)},R=()=>(0,r.jsx)("div",{className:C.Box_0,children:(0,r.jsx)(v.A,{size:"small"})}),D=({suggestion:e})=>{let t=N(e),n={id:(0,f.useId)(),children:t,role:"option",className:C.ActionListItem};return"string"==typeof e?(0,r.jsx)(w.l.Item,{...n}):e.render(n)},T=({suggestions:e,portalName:t,triggerCharCoords:n,onClose:i,onCommit:s,inputRef:o,visible:a,tabInsertsSuggestions:l,defaultPlacement:c,firstOptionSelectionMode:d="active"})=>{let u=(0,f.useRef)(null),[h,p]=(0,f.useState)(null),m=(0,f.useCallback)(({option:e})=>s(e),[s]);b({isOpen:a&&"loading"!==e,listElement:h,inputElement:o.current,onCommit:m,options:Array.isArray(e)?e:[],tabInsertsSuggestions:l,firstOptionSelectionMode:d});let[g,x]=(0,f.useState)(0);return(0,y.A)(function(){let e=u.current?.offsetHeight??0,t=n.top+n.height,r=t+e>window.innerHeight,i=n.top-e,s=i<0,o={below:r&&!s?i:t,above:s&&!r?t:i}[c];x(Number.isNaN(o)?0:o)},[n.top,n.height,e,a,c]),a?(0,r.jsx)(j.Ay,{onEscape:i,onClickOutside:i,returnFocusRef:o,preventFocusOnOpen:!0,portalContainerName:t,top:g,left:n.left,ref:u,className:C.Overlay_0,children:(0,r.jsx)(w.l,{ref:p,role:"listbox",children:"loading"===e?(0,r.jsx)(R,{}):e?.map(e=>r.jsx(D,{suggestion:e},O(e)))})}):(0,r.jsx)(r.Fragment,{})};T.displayName="SuggestionList";try{R.displayName||(R.displayName="LoadingIndicator")}catch{}try{D.displayName||(D.displayName="SuggestionListItem")}catch{}let L={container:"InlineAutocomplete-module__container--UwGMb",fullWidth:"InlineAutocomplete-module__fullWidth--X6eXo"},E=e=>{try{return e.selectionStart}catch(e){if(e instanceof TypeError)return null;throw e}},P=()=>{},M=({triggers:e,suggestions:t,onShowSuggestions:n,onHideSuggestions:s,onSelectSuggestion:o,style:g,children:x,tabInsertsSuggestions:b=!1,suggestionsPlacement:v="below",firstOptionSelectionMode:w="selected",portalName:y,fullWidth:j=!1,...C})=>{let[,S]=(0,f.useState)(0),_=(0,u.Lf)(C),O=(0,f.useRef)(null);(0,h.T)(x.ref??P,O);let R=function(e,t){if(f.Children.only(e),t.current&&!(t.current instanceof HTMLInputElement)&&!(t.current instanceof HTMLTextAreaElement))throw TypeError("AutocompleteTextarea child must be a component that forwards a ref and props to an <input> or <textarea> element.");return e}(x,O),D=(0,d.H)({inputRef:O,fallbackEventHandler:R.props.onChange??P}),M=(0,f.useRef)(null),$=null!==t&&t.length>0;(0,f.useEffect)(()=>{if($){let e=(0,i.n)(()=>S(e=>e+1),100);return document.addEventListener("scroll",e,{capture:!0}),()=>{document.removeEventListener("scroll",e,{capture:!0})}}},[$]);let F=O.current&&M.current&&$?a(O.current,(E(O.current)??0)-M.current.query.length):{top:0,left:0,height:0},B=(0,f.cloneElement)(R,{..._,onBlur:A(R.props.onBlur,()=>{s()}),onKeyDown:A(R.props.onKeyDown,e=>{$&&"Tab"===e.key&&!b&&(s(),e.stopPropagation())}),onChange:A(R.props.onChange,t=>{let r=E(t.currentTarget);if(null===r){s();return}M.current=k(e,t.currentTarget.value,r),M.current?n(M.current):s()}),ref:O}),V=$?"loading"===t?"Loading autocomplete suggestions\u2026":`${t.length} autocomplete ${1===t.length?"suggestion":"suggestions"} available; "${N(t[0])}" is highlighted. Press ${b?"Enter or Tab":"Enter"} to select.`:"";return(0,r.jsxs)(c.tL,{commands:{"github:cancel":$?s:void 0},className:(0,m.$)(L.container,j&&L.fullWidth),style:g,children:[B,l.KJ&&(0,r.jsx)(T,{suggestions:t,inputRef:O,onCommit:e=>{let t=I(e),n=N(e)??"";if(!O.current||!M.current)return;let{query:r,trigger:i}=M.current,a=E(O.current)??0,l=r.length+i.triggerChar.length,c=a-l,d=t||(i.keepTriggerCharOnCommit??!0)?i.triggerChar:"",u=!t&&(i.insertSpaceOnCommit??!0),h=`${d}${n}${u?" ":""}`;s(),D(h,[c,c+l]),o?.({suggestion:e,trigger:i,query:r})},onClose:s,triggerCharCoords:F,visible:$,tabInsertsSuggestions:b,defaultPlacement:v,firstOptionSelectionMode:w,portalName:y}),l.KJ&&(0,r.jsx)(p.Z,{children:(0,r.jsx)("span",{"aria-live":"assertive","aria-atomic":!0,style:{clipPath:"circle(0)",position:"absolute"},children:V})})]})};try{M.displayName||(M.displayName="InlineAutocomplete")}catch{}},77731:(e,t,n)=>{n.d(t,{X:()=>a});var r=n(74848),i=n(47139),s=n(40776),o=n(10660);let a=({children:e="Preview",feedbackUrl:t,className:n})=>(0,r.jsx)(o.V,{className:n,label:(0,r.jsx)(i.A,{variant:"success",children:e}),link:t?(0,r.jsx)(s.A,{feedbackUrl:t}):void 0});try{a.displayName||(a.displayName="BetaLabel")}catch{}},40776:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(74848),i=n(34614);let s={link:"FeedbackLink-module__link--uY6Kq"},o=({feedbackUrl:e})=>(0,r.jsx)(i.A,{className:s.link,href:e,children:"Give feedback"});try{o.displayName||(o.displayName="FeedbackLink")}catch{}},10660:(e,t,n)=>{n.d(t,{V:()=>s});var r=n(74848),i=n(46309);let s=({label:e,link:t,className:n})=>t?(0,r.jsxs)(i.B,{direction:"horizontal",gap:"condensed",align:"baseline",className:n,children:[e," ",t]}):n?(0,r.jsx)("span",{className:n,children:e}):(0,r.jsx)(r.Fragment,{children:e});try{s.displayName||(s.displayName="LabelWithLink")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-b1c483","vendors-node_modules_github_catalyst_lib_index_js-node_modules_tanstack_react-query_build_mod-3b1f5d","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_react-relay_index_js","vendors-node_modules_remark-gfm_lib_index_js-node_modules_remark-parse_lib_index_js-node_modu-44d0fc","vendors-node_modules_highlight_js_es_core_js-node_modules_lowlight_lib_all_js","vendors-node_modules_hastscript_lib_index_js-node_modules_react-markdown_lib_index_js-node_mo-68849e","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-690142","vendors-node_modules_github_hydro-analytics-client_dist_analytics-client_js-node_modules_gith-23d21c","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_github_combobox-nav_dis-9a2b12","ui_packages_failbot_failbot_ts","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_copilot-chat_utils_copilot-chat-helpers_ts","ui_packages_copilot-markdown_MarkdownRenderer_tsx","ui_packages_copilot-chat_utils_CopilotChatContext_tsx","ui_packages_copilot-chat_components_CopilotIconAnimation_tsx-ui_packages_copilot-chat_compone-8be2e4","ui_packages_promise-with-resolvers-polyfill_promise-with-resolvers-polyfill_ts-ui_packages_re-024ade"],()=>t(10529)),e.O()}]);
//# sourceMappingURL=copilot-chat-bec8f6f491ec.js.map